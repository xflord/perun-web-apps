!function(){function t(t,i){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,i)}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var s=0,a=function(){};return{s:a,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){o=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(o)throw r}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}(self.webpackChunkperun_web_apps=self.webpackChunkperun_web_apps||[]).push([[917],{21575:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var a=n(17),r=n(31572),c=n(57629),o=function(){var t=function(){function t(){i(this,t)}return s(t,[{key:"prepareRoute",value:function(t){return t&&t.activatedRouteData&&t.activatedRouteData.animation}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-animated-router-outlet"]],decls:3,vars:0,consts:[["outlet","outlet"]],template:function(t,e){1&t&&(r.TgZ(0,"div"),r._UZ(1,"router-outlet",null,0),r.qZA())},directives:[c.lC],styles:[""],data:{animation:[a.Ji]}}),t}()},40695:function(e,n,a){"use strict";a.d(n,{n:function(){return I}});var r=a(84608),c=a(4230),o=a(68416),u=a(65249),l=a(60611),d=(a(41939),a(31572)),f=a(48160),h=a(19139),p=a(61511),b=a(15980),g=a(39571),m=a(67806),y=a(41186),E=["list"];function S(t,e){1&t&&(d.TgZ(0,"app-alert",10),d._uU(1),d.ALo(2,"translate"),d.qZA()),2&t&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE.ERROR_EMPTY_VALUE")," "))}function A(t,e){1&t&&d._UZ(0,"mat-spinner",11)}function v(t,e){if(1&t&&d._UZ(0,"perun-web-apps-attributes-list",12,13),2&t){var i=d.oxw();d.Q6J("tableId",i.tableId)("attributes",i.attributes)("filterValue",i.filterValue)("inDialog",!0)("emptyListText","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.EMPTY_ATTRIBUTES")("selection",i.selected)}}var I=function(){var e=function(){function e(t,n,s,a,r){var o=this;i(this,e),this.dialogRef=t,this.data=n,this.attributesManager=s,this.notificator=a,this.translate=r,this.attributes=[],this.selected=new c.Ov(!0,[]),this.showError=!1,this.filterValue="",this.tableId=l.rF,this.translate.get("DIALOGS.CREATE_ATTRIBUTE.SUCCESS_SAVE").subscribe(function(t){return o.saveSuccessMessage=t})}return s(e,[{key:"ngOnInit",value:function(){var t,e,i,n,s,a,r,c,o=this,u=new Array;switch(this.data.notEmptyAttributes.forEach(function(t){u.push(t.id)}),this.data.entity){case"member":t=this.data.entityId;break;case"user":e=this.data.entityId;break;case"vo":i=this.data.entityId;break;case"group":n=this.data.entityId;break;case"resource":s=this.data.entityId;break;case"facility":a=this.data.entityId;break;case"host":r=this.data.entityId;break;case"ues":c=this.data.entityId}switch(this.data.secondEntity){case"member":t=this.data.secondEntityId;break;case"user":e=this.data.secondEntityId;break;case"vo":i=this.data.secondEntityId;break;case"group":n=this.data.secondEntityId;break;case"resource":s=this.data.secondEntityId;break;case"facility":a=this.data.secondEntityId;break;case"host":r=this.data.secondEntityId;break;case"ues":c=this.data.secondEntityId}this.loading=!0,this.attributesManager.getAttributesDefinitionWithRights(t,e,i,n,s,a,r,c).subscribe(function(t){o.attributes=t,o.attributes=o.attributes.filter(function(t){return!u.includes(t.id)&&o.twoEntityValid(t)}),o.loading=!1})}},{key:"onCancel",value:function(){this.dialogRef.close()}},{key:"onSave",value:function(){var e=this;this.list.updateMapAttributes();var i,n=!1,s=t(this.selected.selected);try{for(s.s();!(i=s.n()).done;){var a=i.value;"java.util.ArrayList"===a.type&&0===a.value.length&&(n=!0),void 0===a.value&&(n=!0)}}catch(r){s.e(r)}finally{s.f()}if(n)return this.showError=!0,void setTimeout(function(){e.showError=!1},5e3);switch(this.data.entity){case"facility":this.attributesManager.setFacilityAttributes({facility:this.data.entityId,attributes:this.selected.selected}).subscribe(function(){e.handleSuccess()});break;case"group":switch(this.data.secondEntity){case"resource":this.attributesManager.setGroupResourceAttributes({group:this.data.entityId,resource:this.data.secondEntityId,attributes:this.selected.selected}).subscribe(function(){e.handleSuccess()});break;default:this.attributesManager.setGroupAttributes({group:this.data.entityId,attributes:this.selected.selected}).subscribe(function(){e.handleSuccess()})}break;case"member":switch(this.data.secondEntity){case"resource":this.attributesManager.setMemberResourceAttributes({member:this.data.entityId,resource:this.data.secondEntityId,attributes:this.selected.selected}).subscribe(function(){e.handleSuccess()});break;case"group":this.attributesManager.setMemberGroupAttributes({member:this.data.entityId,group:this.data.secondEntityId,attributes:this.selected.selected}).subscribe(function(){e.handleSuccess()});break;default:this.attributesManager.setMemberAttributes({member:this.data.entityId,attributes:this.selected.selected}).subscribe(function(){e.handleSuccess()})}break;case"resource":this.attributesManager.setResourceAttributes({resource:this.data.entityId,attributes:this.selected.selected}).subscribe(function(){e.handleSuccess()});break;case"user":switch(this.data.secondEntity){case"facility":this.attributesManager.setUserFacilityAttributes({user:this.data.entityId,facility:this.data.secondEntityId,attributes:this.selected.selected}).subscribe(function(){e.handleSuccess()});break;default:this.attributesManager.setUserAttributes({user:this.data.entityId,attributes:this.selected.selected}).subscribe(function(){e.handleSuccess()})}break;case"vo":this.attributesManager.setVoAttributes({vo:this.data.entityId,attributes:this.selected.selected}).subscribe(function(){e.handleSuccess()});break;case"host":this.attributesManager.setHostAttributes({host:this.data.entityId,attributes:this.selected.selected}).subscribe(function(){e.handleSuccess()});break;case"ues":this.attributesManager.setUserExtSourceAttributes({userExtSource:this.data.entityId,attributes:this.selected.selected}).subscribe(function(){e.handleSuccess()})}}},{key:"applyFilter",value:function(t){this.filterValue=t}},{key:"handleSuccess",value:function(){this.notificator.showSuccess(this.saveSuccessMessage),this.selected.clear(),this.dialogRef.close("saved")}},{key:"twoEntityValid",value:function(t){return!this.data.secondEntity||t.entity==="".concat(this.data.entity,"_").concat(this.data.secondEntity)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(r.so),d.Y36(r.WI),d.Y36(u.H8),d.Y36(o.V6),d.Y36(f.sK))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-create-attribute-dialog"]],viewQuery:function(t,e){var i;(1&t&&d.Gf(E,5),2&t)&&(d.iGM(i=d.CRH())&&(e.list=i.first))},decls:17,vars:17,consts:[["mat-dialog-title",""],[1,"page-subtitle"],[1,"font-size-1rem",3,"placeholder","filter"],["class","ml-3 font-size-1rem","alert_type","error",4,"ngIf"],["mat-dialog-content",""],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","attributes","filterValue","inDialog","emptyListText","selection",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","data-cy","save-selected-attributes","mat-flat-button","",1,"ml-2",3,"disabled","click"],["alert_type","error",1,"ml-3","font-size-1rem"],[1,"ml-auto","mr-auto"],[3,"tableId","attributes","filterValue","inDialog","emptyListText","selection"],["list",""]],template:function(t,e){1&t&&(d.TgZ(0,"div"),d.TgZ(1,"div",0),d.TgZ(2,"h1",1),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.TgZ(5,"perun-web-apps-immediate-filter",2),d.NdJ("filter",function(t){return e.applyFilter(t)}),d.qZA(),d.YNc(6,S,3,3,"app-alert",3),d.qZA(),d.TgZ(7,"div",4),d.YNc(8,A,1,0,"mat-spinner",5),d.YNc(9,v,2,6,"perun-web-apps-attributes-list",6),d.qZA(),d.TgZ(10,"div",7),d.TgZ(11,"button",8),d.NdJ("click",function(){return e.onCancel()}),d._uU(12),d.ALo(13,"translate"),d.qZA(),d.TgZ(14,"button",9),d.NdJ("click",function(){return e.onSave()}),d._uU(15),d.ALo(16,"translate"),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Tol(e.data.style),d.xp6(3),d.Oqu(d.lcZ(4,11,"DIALOGS.CREATE_ATTRIBUTE.SET_NEW")),d.xp6(2),d.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),d.xp6(1),d.Q6J("ngIf",e.showError),d.xp6(2),d.Q6J("ngIf",e.loading),d.xp6(1),d.Q6J("ngIf",!e.loading),d.xp6(3),d.hij(" ",d.lcZ(13,13,"DIALOGS.CREATE_ATTRIBUTE.CANCEL")," "),d.xp6(2),d.Q6J("disabled",0===e.selected.selected.length),d.xp6(1),d.hij(" ",d.lcZ(16,15,"DIALOGS.CREATE_ATTRIBUTE.SAVE")," "))},directives:[r.uh,h.L,p.O5,r.xY,r.H8,b.lW,g.w,m.$g,y.p],pipes:[f.X$],styles:[".font-size-1rem[_ngcontent-%COMP%]{font-size:1rem!important}"]}),e}()},13572:function(e,n,a){"use strict";a.d(n,{k:function(){return A}});var r=a(84608),c=a(67033),o=a(68416),u=a(65249),l=a(31572),d=a(48160),f=a(61511),h=a(15980),p=a(67806);function b(t,e){1&t&&l._UZ(0,"mat-spinner",6)}function g(t,e){1&t&&l._UZ(0,"th",15)}function m(t,e){if(1&t&&(l.TgZ(0,"td",16),l._uU(1),l.qZA()),2&t){var i=e.$implicit;l.xp6(1),l.hij(" ",i.displayName," ")}}function y(t,e){1&t&&l._UZ(0,"tr",17)}function E(t,e){1&t&&l._UZ(0,"tr",18)}function S(t,e){if(1&t&&(l.TgZ(0,"div",7),l.TgZ(1,"div"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"div",8),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.TgZ(7,"table",9),l.ynx(8,10),l.YNc(9,g,1,0,"th",11),l.YNc(10,m,2,1,"td",12),l.BQk(),l.YNc(11,y,1,0,"tr",13),l.YNc(12,E,1,0,"tr",14),l.qZA(),l.qZA()),2&t){var i=l.oxw();l.xp6(2),l.hij(" ",l.lcZ(3,5,"DIALOGS.DELETE_ATTRIBUTES.DESCRIPTION")," "),l.xp6(3),l.hij(" ",l.lcZ(6,7,"DIALOGS.DELETE_ATTRIBUTES.ASK")," "),l.xp6(2),l.Q6J("dataSource",i.dataSource),l.xp6(4),l.Q6J("matHeaderRowDef",i.displayedColumns),l.xp6(1),l.Q6J("matRowDefColumns",i.displayedColumns)}}var A=function(){var e=function(){function e(t,n,s,a,r){i(this,e),this.dialogRef=t,this.data=n,this.notificator=s,this.translate=a,this.attributesManager=r,this.displayedColumns=["name"],this.loading=!1}return s(e,[{key:"ngOnInit",value:function(){this.dataSource=new c.by(this.data.attributes),this.theme=this.data.theme}},{key:"onCancel",value:function(){this.dialogRef.close(!1)}},{key:"onSubmit",value:function(){var e,i=this,n=[],s=t(this.data.attributes);try{for(s.s();!(e=s.n()).done;){var a=e.value;n.push(a.id)}}catch(c){s.e(c)}finally{s.f()}var r={};switch(r[this.data.entity]=this.data.entityId,r.attributes=n,void 0!==this.data.secondEntity&&(r[this.data.secondEntity]=this.data.secondEntityId),this.loading=!0,this.data.entity){case"vo":this.attributesManager.removeVoAttributes(this.data.entityId,n).subscribe(function(){i.onSuccess()},function(){return i.loading=!1});break;case"group":switch(this.data.secondEntity){case"resource":this.attributesManager.removeGroupResourceAttributes(this.data.entityId,this.data.secondEntityId,n).subscribe(function(){i.onSuccess()},function(){return i.loading=!1});break;default:this.attributesManager.removeGroupAttributes(this.data.entityId,n).subscribe(function(){i.onSuccess()},function(){return i.loading=!1})}break;case"user":switch(this.data.secondEntity){case"facility":this.attributesManager.removeUserFacilityAttributes(this.data.entityId,this.data.secondEntityId,n).subscribe(function(){i.onSuccess()},function(){return i.loading=!1});break;default:this.attributesManager.removeUserAttributes(this.data.entityId,n).subscribe(function(){i.onSuccess()},function(){return i.loading=!1})}break;case"member":switch(this.data.secondEntity){case"resource":this.attributesManager.removeMemberResourceAttributes(this.data.entityId,this.data.secondEntityId,n).subscribe(function(){i.onSuccess()},function(){return i.loading=!1});break;case"group":this.attributesManager.removeMemberGroupAttributes(this.data.entityId,this.data.secondEntityId,n).subscribe(function(){i.onSuccess()},function(){return i.loading=!1});break;default:this.attributesManager.removeMemberAttributes(this.data.entityId,n).subscribe(function(){i.onSuccess()},function(){return i.loading=!1})}break;case"facility":this.attributesManager.removeFacilityAttributes(this.data.entityId,n).subscribe(function(){i.onSuccess()},function(){return i.loading=!1});break;case"host":this.attributesManager.removeHostAttributes(this.data.entityId,n).subscribe(function(){i.onSuccess()},function(){return i.loading=!1});break;case"ues":this.attributesManager.removeUesAttributes(this.data.entityId,n).subscribe(function(){i.onSuccess()});break;case"resource":this.attributesManager.removeResourceAttributes(this.data.entityId,n).subscribe(function(){return i.onSuccess()})}}},{key:"onSuccess",value:function(){var t=this;this.translate.get("DIALOGS.DELETE_ATTRIBUTES.SUCCESS").subscribe(function(e){t.notificator.showSuccess(e),t.dialogRef.close(!0)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(r.so),l.Y36(r.WI),l.Y36(o.V6),l.Y36(d.sK),l.Y36(u.H8))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-delete-attribute-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn","data-cy","delete-attributes",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(t,e){1&t&&(l.TgZ(0,"div"),l.TgZ(1,"h1",0),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.YNc(4,b,1,0,"mat-spinner",1),l.YNc(5,S,13,9,"div",2),l.TgZ(6,"div",3),l.TgZ(7,"button",4),l.NdJ("click",function(){return e.onCancel()}),l._uU(8),l.ALo(9,"translate"),l.qZA(),l.TgZ(10,"button",5),l.NdJ("click",function(){return e.onSubmit()}),l._uU(11),l.ALo(12,"translate"),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Tol(e.theme),l.xp6(2),l.Oqu(l.lcZ(3,9,"DIALOGS.DELETE_ATTRIBUTES.TITLE")),l.xp6(2),l.Q6J("ngIf",e.loading),l.xp6(1),l.Q6J("ngIf",!e.loading),l.xp6(3),l.hij(" ",l.lcZ(9,11,"DIALOGS.DELETE_ATTRIBUTES.CANCEL")," "),l.xp6(2),l.Q6J("disabled",e.loading),l.xp6(1),l.hij(" ",l.lcZ(12,13,"DIALOGS.DELETE_ATTRIBUTES.DELETE")," "))},directives:[r.uh,f.O5,r.H8,h.lW,p.$g,r.xY,c.BZ,c.w1,c.fO,c.Dz,c.as,c.nj,c.ge,c.ev,c.XQ,c.Gk],pipes:[d.X$],styles:[""]}),e}()},541:function(t,e,n){"use strict";n.d(e,{t:function(){return T}});var a=n(65249),r=n(4230),c=n(84140),o=n(40695),u=n(6527),l=n(13572),d=(n(41939),n(60611)),f=n(31572),h=n(84608),p=n(59403),b=n(15980),g=n(19139),m=n(61511),y=n(67806),E=n(41186),S=n(48160),A=["list"];function v(t,e){1&t&&f._UZ(0,"mat-spinner",7)}function I(t,e){if(1&t&&f._UZ(0,"perun-web-apps-attributes-list",8,9),2&t){var i=f.oxw();f.Q6J("tableId",i.tableId)("filterValue",i.filterValue)("attributes",i.attributes)("selection",i.selection)}}var T=function(){var t=function(){function t(e,n){i(this,t),this.attributesManagerService=e,this.dialog=n,this.attributes=[],this.selection=new r.Ov(!0,[]),this.filterValue="",this.tableId=d.rF,this.loading=!1}return s(t,[{key:"ngOnInit",value:function(){this.refreshTable()}},{key:"refreshTable",value:function(){var t=this;switch(this.loading=!0,this.entity){case"member":this.attributesManagerService.getMemberAttributes(this.entityId).subscribe(function(e){t.attributes=e,t.selection.clear(),t.loading=!1});break;case"group":this.attributesManagerService.getGroupAttributes(this.entityId).subscribe(function(e){t.attributes=e,t.selection.clear(),t.loading=!1});break;case"user":this.attributesManagerService.getUserAttributes(this.entityId).subscribe(function(e){t.attributes=e,t.selection.clear(),t.loading=!1});break;case"resource":this.attributesManagerService.getResourceAttributes(this.entityId).subscribe(function(e){t.attributes=e,t.selection.clear(),t.loading=!1});break;case"facility":this.attributesManagerService.getFacilityAttributes(this.entityId).subscribe(function(e){t.attributes=e,t.selection.clear(),t.loading=!1});break;case"vo":this.attributesManagerService.getVoAttributes(this.entityId).subscribe(function(e){t.attributes=e,t.selection.clear(),t.loading=!1})}}},{key:"applyFilter",value:function(t){this.filterValue=t}},{key:"onCreate",value:function(){var t=this,e=(0,c.kZ)();e.width="1050px",e.data={entityId:this.entityId,entity:this.entity,notEmptyAttributes:this.attributes,style:this.entity+"-theme"},this.dialog.open(o.n,e).afterClosed().subscribe(function(e){e&&t.refreshTable()})}},{key:"onSave",value:function(){var t=this;this.list.updateMapAttributes();var e=(0,c.kZ)();e.width="450px",e.data={entityId:this.entityId,entity:this.entity,attributes:this.selection.selected},this.dialog.open(u.wA,e).afterClosed().subscribe(function(e){e&&t.refreshTable()})}},{key:"onDelete",value:function(){var t=this,e=(0,c.kZ)();e.width="450px",e.data={entityId:this.entityId,entity:this.entity,attributes:this.selection.selected},this.dialog.open(l.k,e).afterClosed().subscribe(function(e){e&&t.refreshTable()})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f.Y36(a.H8),f.Y36(h.uw))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-one-entity-attribute-page"]],viewQuery:function(t,e){var i;(1&t&&f.Gf(A,5),2&t)&&(f.iGM(i=f.CRH())&&(e.list=i.first))},inputs:{entity:"entity",entityId:"entityId"},decls:13,vars:14,consts:[[1,"mt-2",3,"refresh"],["mat-flat-button","","color","accent","data-cy","add-attributes",1,"mr-2","mt-2","action-button",3,"click"],["mat-flat-button","","color","accent",1,"mr-2","mt-2",3,"disabled","click"],["color","warn","mat-flat-button","","data-cy","remove-attributes",1,"mt-2","mr-2",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","filterValue","attributes","selection",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"tableId","filterValue","attributes","selection"],["list",""]],template:function(t,e){1&t&&(f.TgZ(0,"perun-web-apps-refresh-button",0),f.NdJ("refresh",function(){return e.refreshTable()}),f.qZA(),f.TgZ(1,"button",1),f.NdJ("click",function(){return e.onCreate()}),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.TgZ(4,"button",2),f.NdJ("click",function(){return e.onSave()}),f._uU(5),f.ALo(6,"translate"),f.qZA(),f.TgZ(7,"button",3),f.NdJ("click",function(){return e.onDelete()}),f._uU(8),f.ALo(9,"translate"),f.qZA(),f.TgZ(10,"perun-web-apps-immediate-filter",4),f.NdJ("filter",function(t){return e.applyFilter(t)}),f.qZA(),f.YNc(11,v,1,0,"mat-spinner",5),f.YNc(12,I,2,4,"perun-web-apps-attributes-list",6)),2&t&&(f.xp6(2),f.hij(" ",f.lcZ(3,8,"USER_DETAIL.SETTINGS.ATTRIBUTES.CREATE"),"\n"),f.xp6(2),f.Q6J("disabled",0===e.selection.selected.length),f.xp6(1),f.hij(" ",f.lcZ(6,10,"USER_DETAIL.SETTINGS.ATTRIBUTES.SAVE"),"\n"),f.xp6(2),f.Q6J("disabled",0===e.selection.selected.length),f.xp6(1),f.hij(" ",f.lcZ(9,12,"USER_DETAIL.SETTINGS.ATTRIBUTES.DELETE"),"\n"),f.xp6(2),f.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),f.xp6(1),f.Q6J("ngIf",e.loading),f.xp6(1),f.Q6J("ngIf",!e.loading))},directives:[p.t,b.lW,g.L,m.O5,y.$g,E.p],pipes:[S.X$],styles:[""]}),t}()},3417:function(e,n,a){"use strict";a.d(n,{Y:function(){return J}});var r=a(65249),c=(a(41939),a(4230)),o=a(13572),u=a(84140),l=a(6527),d=a(40695),f=a(67004),h=a(31572),p=a(84608),b=a(61511),g=a(67806),m=a(39571),y=a(59403),E=a(15980),S=a(19139),A=a(37665),v=a(42847),I=a(44973),T=a(48160),Z=function(){var t=function(){function t(){i(this,t),this.memberSelected=new h.vpe,this.memberFullNameFunction=function(t){return(0,u.bD)(t.user)}}return s(t,[{key:"ngOnInit",value:function(){this.members=this.members.sort(u.fx)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h.Xpm({type:t,selectors:[["perun-web-apps-member-search-select"]],inputs:{members:"members"},outputs:{memberSelected:"memberSelected"},decls:4,vars:12,consts:[[3,"entities","searchFunction","mainTextFunction","selectPlaceholder","findPlaceholder","noEntriesText","entitySelected"]],template:function(t,e){1&t&&(h.TgZ(0,"perun-web-apps-entity-search-select",0),h.NdJ("entitySelected",function(t){return e.memberSelected.emit(t)}),h.ALo(1,"translate"),h.ALo(2,"translate"),h.ALo(3,"translate"),h.qZA()),2&t&&h.Q6J("entities",e.members)("searchFunction",e.memberFullNameFunction)("mainTextFunction",e.memberFullNameFunction)("selectPlaceholder",h.lcZ(1,6,"SHARED_LIB.PERUN.COMPONENTS.MEMBER_SEARCH_SELECT.SELECT_MEMBER"))("findPlaceholder",h.lcZ(2,8,"SHARED_LIB.PERUN.COMPONENTS.MEMBER_SEARCH_SELECT.FIND_MEMBER"))("noEntriesText",h.lcZ(3,10,"SHARED_LIB.PERUN.COMPONENTS.MEMBER_SEARCH_SELECT.NO_MEMBER_FOUND"))},directives:[I.i],pipes:[T.X$],styles:[""]}),t}(),x=function(){var t=function(){function t(){i(this,t),this.facilitySelected=new h.vpe,this.nameFunction=function(t){return t.name}}return s(t,[{key:"ngOnInit",value:function(){this.facilities=this.facilities.sort(u.aC)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h.Xpm({type:t,selectors:[["perun-web-apps-facility-search-select"]],inputs:{facilities:"facilities"},outputs:{facilitySelected:"facilitySelected"},decls:4,vars:12,consts:[[3,"entities","searchFunction","mainTextFunction","selectPlaceholder","findPlaceholder","noEntriesText","entitySelected"]],template:function(t,e){1&t&&(h.TgZ(0,"perun-web-apps-entity-search-select",0),h.NdJ("entitySelected",function(t){return e.facilitySelected.emit(t)}),h.ALo(1,"translate"),h.ALo(2,"translate"),h.ALo(3,"translate"),h.qZA()),2&t&&h.Q6J("entities",e.facilities)("searchFunction",e.nameFunction)("mainTextFunction",e.nameFunction)("selectPlaceholder",h.lcZ(1,6,"SHARED_LIB.PERUN.COMPONENTS.FACILITY_SEARCH_SELECT.SELECT_FACILITY"))("findPlaceholder",h.lcZ(2,8,"SHARED_LIB.PERUN.COMPONENTS.FACILITY_SEARCH_SELECT.FIND_FACILITY"))("noEntriesText",h.lcZ(3,10,"SHARED_LIB.PERUN.COMPONENTS.FACILITY_SEARCH_SELECT.NO_FACILITY_FOUND"))},directives:[I.i],pipes:[T.X$],styles:[""]}),t}(),k=a(7927),w=a(41186),R=["list"];function L(t,e){1&t&&h._UZ(0,"mat-spinner",4)}function C(t,e){if(1&t&&(h.TgZ(0,"app-alert",5),h._uU(1),h.qZA()),2&t){var i=h.oxw();h.xp6(1),h.Oqu(i.noEntityMessage)}}function M(t,e){if(1&t){var i=h.EpF();h.TgZ(0,"perun-web-apps-group-search-select",18),h.NdJ("groupSelected",function(t){return h.CHM(i),h.oxw(2).specifySecondEntity(t)}),h.qZA()}if(2&t){var n=h.oxw(2);h.Q6J("groups",n.entityValues)("firstSelectedGroup",n.specificSecondEntity)("displayStatus",!0)}}function _(t,e){if(1&t){var i=h.EpF();h.TgZ(0,"perun-web-apps-resource-search-select",19),h.NdJ("resourceSelected",function(t){return h.CHM(i),h.oxw(2).specifySecondEntity(t)}),h.qZA()}if(2&t){var n=h.oxw(2);h.Q6J("resources",n.entityValues)}}function N(t,e){if(1&t){var i=h.EpF();h.TgZ(0,"perun-web-apps-member-search-select",20),h.NdJ("memberSelected",function(t){return h.CHM(i),h.oxw(2).specifySecondEntity(t)}),h.qZA()}if(2&t){var n=h.oxw(2);h.Q6J("members",n.entityValues)}}function U(t,e){if(1&t){var i=h.EpF();h.TgZ(0,"perun-web-apps-facility-search-select",21),h.NdJ("facilitySelected",function(t){return h.CHM(i),h.oxw(2).specifySecondEntity(t)}),h.qZA()}if(2&t){var n=h.oxw(2);h.Q6J("facilities",n.entityValues)}}function O(t,e){if(1&t){var i=h.EpF();h.TgZ(0,"perun-web-apps-user-search-select",22),h.NdJ("userSelected",function(t){return h.CHM(i),h.oxw(2).specifySecondEntity(t)}),h.qZA()}if(2&t){var n=h.oxw(2);h.Q6J("users",n.entityValues)}}function D(t,e){1&t&&h._UZ(0,"mat-spinner",4)}function q(t,e){if(1&t&&h._UZ(0,"perun-web-apps-attributes-list",23,24),2&t){var i=h.oxw(2);h.Q6J("attributes",i.attributes)("filterValue",i.filterValue)("selection",i.selection)}}function F(t,e){if(1&t){var i=h.EpF();h.TgZ(0,"div"),h.TgZ(1,"div",6),h.YNc(2,M,1,3,"perun-web-apps-group-search-select",7),h.YNc(3,_,1,1,"perun-web-apps-resource-search-select",8),h.YNc(4,N,1,1,"perun-web-apps-member-search-select",9),h.YNc(5,U,1,1,"perun-web-apps-facility-search-select",10),h.YNc(6,O,1,1,"perun-web-apps-user-search-select",11),h.qZA(),h.TgZ(7,"perun-web-apps-refresh-button",12),h.NdJ("refresh",function(){h.CHM(i);var t=h.oxw();return t.getAttributes(t.specificSecondEntity.id)}),h.qZA(),h.TgZ(8,"button",13),h.NdJ("click",function(){h.CHM(i);var t=h.oxw();return t.onAdd(t.specificSecondEntity.id)}),h._uU(9),h.ALo(10,"translate"),h.qZA(),h.TgZ(11,"button",14),h.NdJ("click",function(){h.CHM(i);var t=h.oxw();return t.onSave(t.specificSecondEntity.id)}),h._uU(12),h.ALo(13,"translate"),h.qZA(),h.TgZ(14,"button",15),h.NdJ("click",function(){h.CHM(i);var t=h.oxw();return t.onDelete(t.specificSecondEntity.id)}),h._uU(15),h.ALo(16,"translate"),h.qZA(),h.TgZ(17,"perun-web-apps-immediate-filter",16),h.NdJ("filter",function(t){return h.CHM(i),h.oxw().applyFilter(t)}),h.qZA(),h.YNc(18,D,1,0,"mat-spinner",1),h.YNc(19,q,2,3,"perun-web-apps-attributes-list",17),h.qZA()}if(2&t){var n=h.oxw();h.xp6(2),h.Q6J("ngIf","group"===n.secondEntity),h.xp6(1),h.Q6J("ngIf","resource"===n.secondEntity),h.xp6(1),h.Q6J("ngIf","member"===n.secondEntity),h.xp6(1),h.Q6J("ngIf","facility"===n.secondEntity),h.xp6(1),h.Q6J("ngIf","user"===n.secondEntity),h.xp6(3),h.hij(" ",h.lcZ(10,13,"MEMBER_DETAIL.SETTINGS.ATTRIBUTES.CREATE")," "),h.xp6(2),h.Q6J("disabled",0===n.selection.selected.length),h.xp6(1),h.hij(" ",h.lcZ(13,15,"MEMBER_DETAIL.SETTINGS.ATTRIBUTES.SAVE")," "),h.xp6(2),h.Q6J("disabled",0===n.selection.selected.length),h.xp6(1),h.hij(" ",h.lcZ(16,17,"MEMBER_DETAIL.SETTINGS.ATTRIBUTES.DELETE")," "),h.xp6(2),h.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),h.xp6(1),h.Q6J("ngIf",n.innerLoading),h.xp6(1),h.Q6J("ngIf",!n.innerLoading)}}var J=function(){var e=function(){function e(t,n,s,a,r,o){i(this,e),this.attributesManagerService=t,this.resourcesManagerService=n,this.facilitiesManagerService=s,this.groupsManagerService=a,this.membersManager=r,this.dialog=o,this.entityValues=[],this.attributes=[],this.selection=new c.Ov(!0,[]),this.allowedStatuses=["INVALID","VALID"],this.loading=!1,this.innerLoading=!1,this.filterValue=""}return s(e,[{key:"ngOnInit",value:function(){this.loadEntityValues(),this.setMessages(this.secondEntity.toLowerCase())}},{key:"loadEntityValues",value:function(){var t=this;switch(this.loading=!0,this.firstEntity){case"member":switch(this.secondEntity){case"resource":this.resourcesManagerService.getAssignedResourcesWithStatus(this.firstEntityId).subscribe(function(e){t.entityValues=e.map(function(t){return t.enrichedResource.resource}),t.preselectEntity(),t.loading=!1});break;case"group":this.groupsManagerService.getMemberGroups(this.firstEntityId).subscribe(function(e){t.entityValues=e,t.preselectEntity(),t.loading=!1})}break;case"group":switch(this.secondEntity){case"resource":this.resourcesManagerService.getResourceAssignments(this.firstEntityId).subscribe(function(e){t.entityValues=e.map(function(t){var e=t.enrichedResource.resource;return e.status=t.status,e}),t.preselectEntity(),t.loading=!1});break;case"member":this.membersManager.getCompleteRichMembersForGroup(this.firstEntityId,!1,this.allowedStatuses,null,[f.r.MEMBER_CORE_ID]).subscribe(function(e){t.entityValues=e,t.preselectEntity(),t.loading=!1})}break;case"user":this.facilitiesManagerService.getAssignedFacilitiesByUser(this.firstEntityId).subscribe(function(e){t.entityValues=e,t.preselectEntity(),t.loading=!1});break;case"resource":switch(this.secondEntity){case"member":this.resourcesManagerService.getAssignedMembersWithStatus(this.firstEntityId).subscribe(function(e){t.entityValues=e.map(function(t){return t.richMember}),t.preselectEntity(),t.loading=!1});break;case"group":this.resourcesManagerService.getGroupAssignments(this.firstEntityId).subscribe(function(e){t.entityValues=e.map(function(t){var e=t.enrichedGroup.group;return e.status=t.status,e}),t.preselectEntity(),t.loading=!1})}break;case"facility":this.facilitiesManagerService.getAssignedUsers(this.firstEntityId).subscribe(function(e){t.entityValues=e,t.preselectEntity(),t.loading=!1})}}},{key:"preselectEntity",value:function(){0!==this.entityValues.length&&this.findInitiallySelectedEntity()}},{key:"findInitiallySelectedEntity",value:function(){var e=this.entityValues[0],i=(0,u.vL)(this.entityKey());if(i){var n,s=t(this.entityValues);try{for(s.s();!(n=s.n()).done;){var a=n.value;if(a.id===i[0]){e=a;break}}}catch(r){s.e(r)}finally{s.f()}}this.specifySecondEntity(e)}},{key:"entityKey",value:function(){switch(this.secondEntity){case"group":return"groups";default:return""}}},{key:"getAttributes",value:function(t){var e=this;switch(this.innerLoading=!0,this.firstEntity){case"member":switch(this.secondEntity){case"resource":this.attributesManagerService.getMemberResourceAttributes(this.firstEntityId,t).subscribe(function(t){e.attributes=t,e.innerLoading=!1});break;case"group":this.attributesManagerService.getMemberGroupAttributes(this.firstEntityId,t).subscribe(function(t){e.attributes=t,e.innerLoading=!1})}break;case"group":switch(this.secondEntity){case"resource":this.attributesManagerService.getGroupResourceAttributes(this.firstEntityId,t).subscribe(function(t){e.attributes=t,e.innerLoading=!1});break;case"member":this.attributesManagerService.getMemberGroupAttributes(t,this.firstEntityId).subscribe(function(t){e.attributes=t,e.innerLoading=!1})}break;case"user":this.attributesManagerService.getUserFacilityAttributes(this.firstEntityId,t).subscribe(function(t){e.attributes=t,e.innerLoading=!1});break;case"resource":switch(this.secondEntity){case"member":this.attributesManagerService.getMemberResourceAttributes(t,this.firstEntityId).subscribe(function(t){e.attributes=t,e.innerLoading=!1});break;case"group":this.attributesManagerService.getGroupResourceAttributes(t,this.firstEntityId).subscribe(function(t){e.attributes=t,e.innerLoading=!1})}break;case"facility":this.attributesManagerService.getUserFacilityAttributes(t,this.firstEntityId).subscribe(function(t){e.attributes=t,e.innerLoading=!1})}}},{key:"setMessages",value:function(t){this.noEntityMessage="No ".concat(t," assigned")}},{key:"onSave",value:function(t){var e=this;this.list.updateMapAttributes();var i=(0,u.kZ)();i.width="450px",i.data={entityId:this.firstEntityId,entity:this.firstEntity,secondEntity:this.secondEntity,secondEntityId:t,attributes:this.selection.selected},this.dialog.open(l.wA,i).afterClosed().subscribe(function(i){i&&(e.selection.clear(),e.getAttributes(t))})}},{key:"onDelete",value:function(t){var e=this,i=(0,u.kZ)();i.width="450px",i.data={entityId:this.firstEntityId,entity:this.firstEntity,secondEntity:this.secondEntity,secondEntityId:t,attributes:this.selection.selected,theme:"".concat(this.firstEntity,"-theme")},this.dialog.open(o.k,i).afterClosed().subscribe(function(i){i&&(e.selection.clear(),e.getAttributes(t))})}},{key:"onAdd",value:function(t){var e=this,i=(0,u.kZ)();i.width="1050px",i.data={entityId:this.firstEntityId,entity:this.firstEntity,secondEntity:this.secondEntity,secondEntityId:t,notEmptyAttributes:this.attributes,style:"".concat(this.firstEntity,"-theme")},this.dialog.open(d.n,i).afterClosed().subscribe(function(i){i&&(e.selection.clear(),e.getAttributes(t))})}},{key:"specifySecondEntity",value:function(t){t&&(this.specificSecondEntity=t,this.getAttributes(this.specificSecondEntity.id))}},{key:"applyFilter",value:function(t){this.filterValue=t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(r.H8),h.Y36(r.xk),h.Y36(r.IQ),h.Y36(r.ff),h.Y36(r.uq),h.Y36(p.uw))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-two-entity-attribute-page"]],viewQuery:function(t,e){var i;(1&t&&h.Gf(R,5),2&t)&&(h.iGM(i=h.CRH())&&(e.list=i.first))},inputs:{firstEntityId:"firstEntityId",firstEntity:"firstEntity",secondEntity:"secondEntity"},decls:4,vars:3,consts:[[1,"mt-3"],["class","ml-auto mr-auto",4,"ngIf"],["alert_type","warn",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],["alert_type","warn"],[1,"flex-row"],[3,"groups","firstSelectedGroup","displayStatus","groupSelected",4,"ngIf"],[3,"resources","resourceSelected",4,"ngIf"],[3,"members","memberSelected",4,"ngIf"],[3,"facilities","facilitySelected",4,"ngIf"],[3,"users","userSelected",4,"ngIf"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2","action-button",3,"click"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],[3,"placeholder","filter"],[3,"attributes","filterValue","selection",4,"ngIf"],[3,"groups","firstSelectedGroup","displayStatus","groupSelected"],[3,"resources","resourceSelected"],[3,"members","memberSelected"],[3,"facilities","facilitySelected"],[3,"users","userSelected"],[3,"attributes","filterValue","selection"],["list",""]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h.YNc(1,L,1,0,"mat-spinner",1),h.YNc(2,C,2,1,"app-alert",2),h.YNc(3,F,20,19,"div",3),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",e.loading),h.xp6(1),h.Q6J("ngIf",0===e.entityValues.length&&!e.loading),h.xp6(1),h.Q6J("ngIf",0!==e.entityValues.length))},directives:[b.O5,g.$g,m.w,y.t,E.lW,S.L,A.h,v.L,Z,x,k.S,w.p],pipes:[T.X$],styles:[".w-35[_ngcontent-%COMP%]{width:35%}"]}),e}()},77889:function(t,e,n){"use strict";n.d(e,{C:function(){return G}});var a=n(58623),r=n(67033),c=n(4230),o=n(84140),u=n(68416),l=n(31572),d=n(82819),f=n(61511),h=n(29236),p=n(43691),b=n(36922),g=n(84534),m=n(39571),y=n(48160),E=n(22196),S=n(92898),A=n(44031),v=n(31447);function I(t,e){if(1&t){var i=l.EpF();l.TgZ(0,"mat-checkbox",21),l.NdJ("change",function(t){l.CHM(i);var e=l.oxw(2);return t?e.masterToggle():null}),l.qZA()}if(2&t){var n=l.oxw(2);l.Q6J("aria-label",n.checkboxLabel())("checked",n.selection.hasValue()&&n.isAllSelected())("indeterminate",n.selection.hasValue()&&!n.isAllSelected())}}function T(t,e){if(1&t&&(l.TgZ(0,"th",19),l.YNc(1,I,1,3,"mat-checkbox",20),l.qZA()),2&t){var i=l.oxw();l.xp6(1),l.Q6J("ngIf",i.selection.isMultipleSelection())}}function Z(t,e){if(1&t){var i=l.EpF();l.TgZ(0,"td",22),l.TgZ(1,"mat-checkbox",23),l.NdJ("change",function(t){var e=l.CHM(i).$implicit,n=l.oxw();return t?n.selection.toggle(e):null})("click",function(t){return t.stopPropagation()}),l.ALo(2,"lowercase"),l.qZA(),l.qZA()}if(2&t){var n=e.$implicit,s=l.oxw();l.xp6(1),l.Q2q("data-cy","",l.lcZ(2,4,n.firstName),"-checkbox"),l.Q6J("aria-label",s.checkboxLabel(n))("checked",s.selection.isSelected(n))("disabled",s.disableSelf&&n.id===s.principalId&&!s.authResolver.isPerunAdmin())}}function x(t,e){1&t&&l._UZ(0,"th",24)}function k(t,e){1&t&&(l.TgZ(0,"mat-icon",28),l.ALo(1,"translate"),l._uU(2," account_circle "),l.qZA()),2&t&&l.s9C("matTooltip",l.lcZ(1,1,"MANAGERS_LIST.PERSON"))}function w(t,e){if(1&t&&(l._UZ(0,"mat-icon",29),l.ALo(1,"translate")),2&t){var i=l.oxw(2);l.s9C("matTooltip",l.lcZ(1,2,"MANAGERS_LIST.SERVICE")),l.Q6J("svgIcon",i.svgIcon)}}function R(t,e){if(1&t&&(l.TgZ(0,"td",25),l.YNc(1,k,3,3,"mat-icon",26),l.YNc(2,w,2,4,"mat-icon",27),l.qZA()),2&t){var i=e.$implicit;l.xp6(1),l.Q6J("ngIf",!i.serviceUser),l.xp6(1),l.Q6J("ngIf",i.serviceUser)}}function L(t,e){1&t&&(l.TgZ(0,"th",30),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&t&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"MANAGERS_LIST.ID")))}function C(t,e){if(1&t&&(l.TgZ(0,"td",25),l._uU(1),l.qZA()),2&t){var i=e.$implicit;l.xp6(1),l.hij(" ",i.id," ")}}function M(t,e){1&t&&(l.TgZ(0,"th",30),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&t&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"MANAGERS_LIST.NAME")))}function _(t,e){if(1&t&&(l.TgZ(0,"td",31),l._uU(1),l.ALo(2,"userFullName"),l.qZA()),2&t){var i=e.$implicit;l.xp6(1),l.Oqu(l.lcZ(2,1,i))}}function N(t,e){1&t&&(l.TgZ(0,"th",30),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&t&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"MANAGERS_LIST.ORGANIZATION")))}function U(t,e){if(1&t&&(l.TgZ(0,"td",31),l._uU(1),l.ALo(2,"userVo"),l.qZA()),2&t){var i=e.$implicit;l.xp6(1),l.Oqu(l.lcZ(2,1,i))}}function O(t,e){1&t&&(l.TgZ(0,"th",30),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&t&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"MANAGERS_LIST.EMAIL")))}function D(t,e){if(1&t&&(l.TgZ(0,"td",31),l._uU(1),l.ALo(2,"userEmail"),l.qZA()),2&t){var i=e.$implicit;l.xp6(1),l.Oqu(l.lcZ(2,1,i))}}function q(t,e){1&t&&(l.TgZ(0,"th",30),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&t&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"MANAGERS_LIST.LOGINS")))}function F(t,e){if(1&t&&(l.TgZ(0,"td",31),l._uU(1),l.ALo(2,"userLogins"),l.qZA()),2&t){var i=e.$implicit;l.xp6(1),l.Oqu(l.lcZ(2,1,i))}}function J(t,e){1&t&&l._UZ(0,"tr",32)}var Y=function(t){return["/admin/users",t]},Q=function(t){return["/myProfile/service-identities",t]};function P(t,e){if(1&t&&l._UZ(0,"tr",33),2&t){var i=e.$implicit,n=l.oxw();l.ekj("cursor-pointer",!n.disableRouting),l.Q6J("perunWebAppsForceRouterLink",n.disableRouting?null:n.routeToAdmin?l.VKq(4,Y,i.id):l.VKq(6,Q,i.id))("perunWebAppsMiddleClickRouterLink",n.disableRouting?null:n.routeToAdmin?l.VKq(8,Y,i.id):l.VKq(10,Q,i.id))}}function V(t,e){if(1&t&&(l.TgZ(0,"app-alert",34),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&t){var i=l.oxw();l.xp6(1),l.hij(" ",i.noUsersFoundLabel?i.noUsersFoundLabel:l.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_USERS"),"\n")}}function H(t,e){1&t&&(l.TgZ(0,"app-alert",34),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&t&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}var G=function(){var t=function(){function t(e,n,s){i(this,t),this.authResolver=e,this.tableCheckbox=n,this.storeService=s,this.svgIcon="perun-service-identity-black",this.selection=new c.Ov(!0,[]),this.displayedColumns=["select","user","id","name","email","logins","organization"],this.routeToAdmin=!0,this.disableRouting=!1,this.filter="",this.disableSelf=!1,this.pageSizeOptions=o.f7}return s(t,[{key:"matSort",set:function(t){this.sort=t}},{key:"getDataForColumn",value:function(t,e){var i;switch(e){case"id":return t.id.toString();case"user":return t.serviceUser?"true":"false";case"name":return t?t.lastName?t.lastName:null!==(i=t.firstName)&&void 0!==i?i:"":"";case"organization":return(0,o.OV)(t);case"email":return(0,o.kN)(t);case"logins":return(0,o.lt)(t);default:return""}}},{key:"getExportDataForColumn",value:function(t,e){switch(e){case"id":return t.id.toString();case"user":return t.serviceUser?"service-user":"user";case"name":return t?(0,o.bD)(t):"";case"organization":return(0,o.OV)(t);case"email":return(0,o.kN)(t);case"logins":return(0,o.lt)(t);default:return""}}},{key:"exportData",value:function(t){(0,o.O6)((0,o.Xn)(this.dataSource.filteredData,this.displayedColumns,this.getExportDataForColumn,this),t)}},{key:"setDataSource",value:function(){var t=this;this.dataSource||(this.dataSource=new r.by,this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filterPredicate=function(e,i){return(0,o.Sd)(e,i,t.displayedColumns,t.getDataForColumn,t)},this.dataSource.sortData=function(e,i){return(0,o.pR)(e,i,t.getDataForColumn,t)}),this.dataSource.filter=this.filter,this.dataSource.data=this.users}},{key:"ngOnChanges",value:function(){this.principalId=this.storeService.getPerunPrincipal().userId,this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(function(t){return"id"!==t})),this.setDataSource()}},{key:"isAllSelected",value:function(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filter,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}},{key:"masterToggle",value:function(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filter,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}},{key:"checkboxLabel",value:function(t){return t?"".concat(this.selection.isSelected(t)?"deselect":"select"," row ").concat(t.id+1):(this.isAllSelected()?"select":"deselect")+" all"}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Y36(u.x4),l.Y36(u.UA),l.Y36(u.d6))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-users-list"]],viewQuery:function(t,e){var i;(1&t&&(l.Gf(a.YE,7),l.Gf(o.l9,7)),2&t)&&(l.iGM(i=l.CRH())&&(e.matSort=i.first),l.iGM(i=l.CRH())&&(e.child=i.first))},inputs:{users:"users",selection:"selection",displayedColumns:"displayedColumns",routeToAdmin:"routeToAdmin",disableRouting:"disableRouting",filter:"filter",tableId:"tableId",noUsersFoundLabel:"noUsersFoundLabel",disableSelf:"disableSelf"},features:[l.TTD],decls:28,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"dataLength","tableId","pageSizeOptions","exportData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","user"],["mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","organization"],["matColumnDef","email"],["matColumnDef","logins"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",3,"cursor-pointer","perunWebAppsForceRouterLink","perunWebAppsMiddleClickRouterLink",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change",4,"ngIf"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","disabled","change","click"],["mat-header-cell",""],["mat-cell","",1,"static-column-size"],["class","align-bottom",3,"matTooltip",4,"ngIf"],["class","align-bottom",3,"matTooltip","svgIcon",4,"ngIf"],[1,"align-bottom",3,"matTooltip"],[1,"align-bottom",3,"matTooltip","svgIcon"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"perunWebAppsForceRouterLink","perunWebAppsMiddleClickRouterLink"],["alert_type","warn"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"perun-web-apps-table-wrapper",1),l.NdJ("exportData",function(t){return e.exportData(t)}),l.TgZ(2,"table",2),l.ynx(3,3),l.YNc(4,T,2,1,"th",4),l.YNc(5,Z,3,6,"td",5),l.BQk(),l.ynx(6,6),l.YNc(7,x,1,0,"th",7),l.YNc(8,R,3,2,"td",8),l.BQk(),l.ynx(9,9),l.YNc(10,L,3,3,"th",10),l.YNc(11,C,2,1,"td",8),l.BQk(),l.ynx(12,11),l.YNc(13,M,3,3,"th",10),l.YNc(14,_,3,3,"td",12),l.BQk(),l.ynx(15,13),l.YNc(16,N,3,3,"th",10),l.YNc(17,U,3,3,"td",12),l.BQk(),l.ynx(18,14),l.YNc(19,O,3,3,"th",10),l.YNc(20,D,3,3,"td",12),l.BQk(),l.ynx(21,15),l.YNc(22,q,3,3,"th",10),l.YNc(23,F,3,3,"td",12),l.BQk(),l.YNc(24,J,1,0,"tr",16),l.YNc(25,P,1,12,"tr",17),l.qZA(),l.qZA(),l.qZA(),l.YNc(26,V,3,3,"app-alert",18),l.YNc(27,H,3,3,"app-alert",18)),2&t&&(l.Q6J("hidden",0===e.users.length||!e.dataSource||0===e.dataSource.filteredData.length),l.xp6(1),l.Q6J("dataLength",e.dataSource.filteredData.length)("tableId",e.tableId)("pageSizeOptions",e.pageSizeOptions),l.xp6(1),l.Q6J("dataSource",e.dataSource),l.xp6(22),l.Q6J("matHeaderRowDef",e.displayedColumns),l.xp6(1),l.Q6J("matRowDefColumns",e.displayedColumns),l.xp6(1),l.Q6J("ngIf",0===e.users.length),l.xp6(1),l.Q6J("ngIf",0===e.dataSource.filteredData.length&&0!==e.users.length))},directives:[d.l,r.BZ,a.YE,r.w1,r.fO,r.Dz,r.as,r.nj,f.O5,r.ge,h.oG,r.ev,p.Hw,b.gM,a.nU,r.XQ,r.Gk,g.Kd,g.YH,m.w],pipes:[f.i8,y.X$,E.d,S.Z,A.S,v.g],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),t}()},8557:function(t,e,n){"use strict";n.d(e,{L:function(){return m}});var a=n(31572),r=n(84608),c=n(57629),o=n(61511),u=n(71522),l=n(84534),d=n(43691),f=n(82877),h=n(48160),p=function(t){return[t]};function b(t,e){if(1&t&&(a.TgZ(0,"div",3),a.TgZ(1,"a",4),a.ALo(2,"multiWordDataCy"),a.ALo(3,"translate"),a._UZ(4,"mat-icon",5),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.qZA()),2&t){var i=e.$implicit;a.xp6(1),a.Gre("",i.style," item-itself"),a.Q6J("routerLink",i.url)("perunWebAppsMiddleClickRouterLink",a.VKq(14,p,i.url)),a.uIk("data-cy",a.lcZ(2,8,a.lcZ(3,10,i.label))),a.xp6(3),a.Q6J("svgIcon",i.cssIcon),a.xp6(1),a.hij(" ",a.lcZ(6,12,i.label)," ")}}function g(t,e){if(1&t&&(a.TgZ(0,"div",1),a.YNc(1,b,7,16,"div",2),a.qZA()),2&t){var i=a.oxw();a.xp6(1),a.Q6J("ngForOf",i.items)}}var m=function(){var t=function(){function t(e,n){i(this,t),this.dialog=e,this.route=n,this.size="large"}return s(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe(function(e){t.voId=e.voId})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Y36(r.uw),a.Y36(c.gz))},t.\u0275cmp=a.Xpm({type:t,selectors:[["perun-web-apps-menu-buttons-field"]],inputs:{items:"items",size:"size"},decls:1,vars:1,consts:[["class","items-container",4,"ngIf"],[1,"items-container"],["class","item-itself-container","mat-ripple","",4,"ngFor","ngForOf"],["mat-ripple","",1,"item-itself-container"],["queryParamsHandling","merge",3,"routerLink","perunWebAppsMiddleClickRouterLink"],[1,"item-pic","perun-icon",3,"svgIcon"]],template:function(t,e){1&t&&a.YNc(0,g,2,1,"div",0),2&t&&a.Q6J("ngIf","small"===e.size)},directives:[o.O5,o.sg,u.wG,c.yS,l.YH,d.Hw],pipes:[f.R,h.X$],styles:[".items-container[_ngcontent-%COMP%]{display:grid;grid-gap:0;grid-template-columns:repeat(auto-fill,minmax(208px,1fr));margin:0 -8px}@media (max-width:768px){.items-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(148px,1fr))}}.item-pic[_ngcontent-%COMP%]{color:currentColor;transform:scale(3);height:74px;margin-bottom:22px}.item-itself-container[_ngcontent-%COMP%]{margin:8px}.item-itself[_ngcontent-%COMP%]{text-align:center;min-height:186px;height:100%;padding:20px;display:flex;flex-direction:column;align-items:center;font-size:1.25rem}.item-itself[_ngcontent-%COMP%]:hover{text-decoration:none}.item-itself[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;margin-bottom:10px}@media (max-width:768px){.item-itself[_ngcontent-%COMP%]{min-height:150px;padding:10px}.item-itself[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;margin-bottom:10px}}"]}),t}()},42847:function(t,e,n){"use strict";n.d(e,{L:function(){return u}});var a=n(31572),r=n(84140),c=n(44973),o=n(48160),u=function(){var t=function(){function t(){i(this,t),this.resource=null,this.displayStatus=!0,this.resourceSelected=new a.vpe,this.nameFunction=function(t){return t.name},this.secondaryFunction=function(){return null}}return s(t,[{key:"ngOnInit",value:function(){this.resources=this.resources.sort(r.aC)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["perun-web-apps-resource-search-select"]],inputs:{resource:"resource",resources:"resources",displayStatus:"displayStatus"},outputs:{resourceSelected:"resourceSelected"},decls:4,vars:15,consts:[[3,"entity","entities","displayStatus","searchFunction","mainTextFunction","secondaryTextFunction","selectPlaceholder","findPlaceholder","noEntriesText","entitySelected"]],template:function(t,e){1&t&&(a.TgZ(0,"perun-web-apps-entity-search-select",0),a.NdJ("entitySelected",function(t){return e.resourceSelected.emit(t)}),a.ALo(1,"translate"),a.ALo(2,"translate"),a.ALo(3,"translate"),a.qZA()),2&t&&a.Q6J("entity",e.resource)("entities",e.resources)("displayStatus",e.displayStatus)("searchFunction",e.nameFunction)("mainTextFunction",e.nameFunction)("secondaryTextFunction",e.secondaryFunction)("selectPlaceholder",a.lcZ(1,9,"SHARED_LIB.PERUN.COMPONENTS.RESOURCE_SEARCH_SELECT.SELECT_RESOURCE"))("findPlaceholder",a.lcZ(2,11,"SHARED_LIB.PERUN.COMPONENTS.RESOURCE_SEARCH_SELECT.FIND_RESOURCE"))("noEntriesText",a.lcZ(3,13,"SHARED_LIB.PERUN.COMPONENTS.RESOURCE_SEARCH_SELECT.NO_RESOURCE_FOUND"))},directives:[c.i],pipes:[o.X$],styles:[""]}),t}()}}])}();