(self.webpackChunkperun_web_apps=self.webpackChunkperun_web_apps||[]).push([[917],{21575:function(t,e,i){"use strict";i.d(e,{A:function(){return r}});var s=i(17),a=i(31572),n=i(57629);let r=(()=>{class t{constructor(){}prepareRoute(t){return t&&t.activatedRouteData&&t.activatedRouteData.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-animated-router-outlet"]],decls:3,vars:0,consts:[["outlet","outlet"]],template:function(t,e){1&t&&(a.TgZ(0,"div"),a._UZ(1,"router-outlet",null,0),a.qZA())},directives:[n.lC],styles:[""],data:{animation:[s.Ji]}}),t})()},40695:function(t,e,i){"use strict";i.d(e,{n:function(){return S}});var s=i(84608),a=i(4230),n=i(68416),r=i(65249),c=i(60611),o=(i(41939),i(31572)),l=i(48160),u=i(19139),d=i(61511),h=i(15980),p=i(39571),b=i(67806),f=i(41186);const g=["list"];function m(t,e){1&t&&(o.TgZ(0,"app-alert",10),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE.ERROR_EMPTY_VALUE")," "))}function E(t,e){1&t&&o._UZ(0,"mat-spinner",11)}function y(t,e){if(1&t&&o._UZ(0,"perun-web-apps-attributes-list",12,13),2&t){const t=o.oxw();o.Q6J("tableId",t.tableId)("attributes",t.attributes)("filterValue",t.filterValue)("inDialog",!0)("emptyListText","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.EMPTY_ATTRIBUTES")("selection",t.selected)}}let S=(()=>{class t{constructor(t,e,i,s,n){this.dialogRef=t,this.data=e,this.attributesManager=i,this.notificator=s,this.translate=n,this.attributes=[],this.selected=new a.Ov(!0,[]),this.showError=!1,this.filterValue="",this.tableId=c.rF,this.translate.get("DIALOGS.CREATE_ATTRIBUTE.SUCCESS_SAVE").subscribe(t=>this.saveSuccessMessage=t)}ngOnInit(){const t=new Array;let e,i,s,a,n,r,c,o;switch(this.data.notEmptyAttributes.forEach(e=>{t.push(e.id)}),this.data.entity){case"member":e=this.data.entityId;break;case"user":i=this.data.entityId;break;case"vo":s=this.data.entityId;break;case"group":a=this.data.entityId;break;case"resource":n=this.data.entityId;break;case"facility":r=this.data.entityId;break;case"host":c=this.data.entityId;break;case"ues":o=this.data.entityId}switch(this.data.secondEntity){case"member":e=this.data.secondEntityId;break;case"user":i=this.data.secondEntityId;break;case"vo":s=this.data.secondEntityId;break;case"group":a=this.data.secondEntityId;break;case"resource":n=this.data.secondEntityId;break;case"facility":r=this.data.secondEntityId;break;case"host":c=this.data.secondEntityId;break;case"ues":o=this.data.secondEntityId}this.loading=!0,this.attributesManager.getAttributesDefinitionWithRights(e,i,s,a,n,r,c,o).subscribe(e=>{this.attributes=e,this.attributes=this.attributes.filter(e=>!t.includes(e.id)&&this.twoEntityValid(e)),this.loading=!1})}onCancel(){this.dialogRef.close()}onSave(){this.list.updateMapAttributes();let t=!1;for(const e of this.selected.selected)"java.util.ArrayList"===e.type&&0===e.value.length&&(t=!0),void 0===e.value&&(t=!0);if(t)return this.showError=!0,void setTimeout(()=>{this.showError=!1},5e3);switch(this.data.entity){case"facility":this.attributesManager.setFacilityAttributes({facility:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;case"group":switch(this.data.secondEntity){case"resource":this.attributesManager.setGroupResourceAttributes({group:this.data.entityId,resource:this.data.secondEntityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;default:this.attributesManager.setGroupAttributes({group:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()})}break;case"member":switch(this.data.secondEntity){case"resource":this.attributesManager.setMemberResourceAttributes({member:this.data.entityId,resource:this.data.secondEntityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;case"group":this.attributesManager.setMemberGroupAttributes({member:this.data.entityId,group:this.data.secondEntityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;default:this.attributesManager.setMemberAttributes({member:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()})}break;case"resource":this.attributesManager.setResourceAttributes({resource:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;case"user":switch(this.data.secondEntity){case"facility":this.attributesManager.setUserFacilityAttributes({user:this.data.entityId,facility:this.data.secondEntityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;default:this.attributesManager.setUserAttributes({user:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()})}break;case"vo":this.attributesManager.setVoAttributes({vo:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;case"host":this.attributesManager.setHostAttributes({host:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;case"ues":this.attributesManager.setUserExtSourceAttributes({userExtSource:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()})}}applyFilter(t){this.filterValue=t}handleSuccess(){this.notificator.showSuccess(this.saveSuccessMessage),this.selected.clear(),this.dialogRef.close("saved")}twoEntityValid(t){return!this.data.secondEntity||t.entity===`${this.data.entity}_${this.data.secondEntity}`}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(s.so),o.Y36(s.WI),o.Y36(r.H8),o.Y36(n.V6),o.Y36(l.sK))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-create-attribute-dialog"]],viewQuery:function(t,e){if(1&t&&o.Gf(g,5),2&t){let t;o.iGM(t=o.CRH())&&(e.list=t.first)}},decls:17,vars:17,consts:[["mat-dialog-title",""],[1,"page-subtitle"],[1,"font-size-1rem",3,"placeholder","filter"],["class","ml-3 font-size-1rem","alert_type","error",4,"ngIf"],["mat-dialog-content",""],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","attributes","filterValue","inDialog","emptyListText","selection",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","data-cy","save-selected-attributes","mat-flat-button","",1,"ml-2",3,"disabled","click"],["alert_type","error",1,"ml-3","font-size-1rem"],[1,"ml-auto","mr-auto"],[3,"tableId","attributes","filterValue","inDialog","emptyListText","selection"],["list",""]],template:function(t,e){1&t&&(o.TgZ(0,"div"),o.TgZ(1,"div",0),o.TgZ(2,"h1",1),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.TgZ(5,"perun-web-apps-immediate-filter",2),o.NdJ("filter",function(t){return e.applyFilter(t)}),o.qZA(),o.YNc(6,m,3,3,"app-alert",3),o.qZA(),o.TgZ(7,"div",4),o.YNc(8,E,1,0,"mat-spinner",5),o.YNc(9,y,2,6,"perun-web-apps-attributes-list",6),o.qZA(),o.TgZ(10,"div",7),o.TgZ(11,"button",8),o.NdJ("click",function(){return e.onCancel()}),o._uU(12),o.ALo(13,"translate"),o.qZA(),o.TgZ(14,"button",9),o.NdJ("click",function(){return e.onSave()}),o._uU(15),o.ALo(16,"translate"),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.Tol(e.data.style),o.xp6(3),o.Oqu(o.lcZ(4,11,"DIALOGS.CREATE_ATTRIBUTE.SET_NEW")),o.xp6(2),o.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),o.xp6(1),o.Q6J("ngIf",e.showError),o.xp6(2),o.Q6J("ngIf",e.loading),o.xp6(1),o.Q6J("ngIf",!e.loading),o.xp6(3),o.hij(" ",o.lcZ(13,13,"DIALOGS.CREATE_ATTRIBUTE.CANCEL")," "),o.xp6(2),o.Q6J("disabled",0===e.selected.selected.length),o.xp6(1),o.hij(" ",o.lcZ(16,15,"DIALOGS.CREATE_ATTRIBUTE.SAVE")," "))},directives:[s.uh,u.L,d.O5,s.xY,s.H8,h.lW,p.w,b.$g,f.p],pipes:[l.X$],styles:[".font-size-1rem[_ngcontent-%COMP%]{font-size:1rem!important}"]}),t})()},13572:function(t,e,i){"use strict";i.d(e,{k:function(){return E}});var s=i(84608),a=i(67033),n=i(68416),r=i(65249),c=i(31572),o=i(48160),l=i(61511),u=i(15980),d=i(67806);function h(t,e){1&t&&c._UZ(0,"mat-spinner",6)}function p(t,e){1&t&&c._UZ(0,"th",15)}function b(t,e){if(1&t&&(c.TgZ(0,"td",16),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.displayName," ")}}function f(t,e){1&t&&c._UZ(0,"tr",17)}function g(t,e){1&t&&c._UZ(0,"tr",18)}function m(t,e){if(1&t&&(c.TgZ(0,"div",7),c.TgZ(1,"div"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"div",8),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.TgZ(7,"table",9),c.ynx(8,10),c.YNc(9,p,1,0,"th",11),c.YNc(10,b,2,1,"td",12),c.BQk(),c.YNc(11,f,1,0,"tr",13),c.YNc(12,g,1,0,"tr",14),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(2),c.hij(" ",c.lcZ(3,5,"DIALOGS.DELETE_ATTRIBUTES.DESCRIPTION")," "),c.xp6(3),c.hij(" ",c.lcZ(6,7,"DIALOGS.DELETE_ATTRIBUTES.ASK")," "),c.xp6(2),c.Q6J("dataSource",t.dataSource),c.xp6(4),c.Q6J("matHeaderRowDef",t.displayedColumns),c.xp6(1),c.Q6J("matRowDefColumns",t.displayedColumns)}}let E=(()=>{class t{constructor(t,e,i,s,a){this.dialogRef=t,this.data=e,this.notificator=i,this.translate=s,this.attributesManager=a,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.dataSource=new a.by(this.data.attributes),this.theme=this.data.theme}onCancel(){this.dialogRef.close(!1)}onSubmit(){const t=[];for(const i of this.data.attributes)t.push(i.id);const e={};switch(e[this.data.entity]=this.data.entityId,e.attributes=t,void 0!==this.data.secondEntity&&(e[this.data.secondEntity]=this.data.secondEntityId),this.loading=!0,this.data.entity){case"vo":this.attributesManager.removeVoAttributes(this.data.entityId,t).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;case"group":switch(this.data.secondEntity){case"resource":this.attributesManager.removeGroupResourceAttributes(this.data.entityId,this.data.secondEntityId,t).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;default:this.attributesManager.removeGroupAttributes(this.data.entityId,t).subscribe(()=>{this.onSuccess()},()=>this.loading=!1)}break;case"user":switch(this.data.secondEntity){case"facility":this.attributesManager.removeUserFacilityAttributes(this.data.entityId,this.data.secondEntityId,t).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;default:this.attributesManager.removeUserAttributes(this.data.entityId,t).subscribe(()=>{this.onSuccess()},()=>this.loading=!1)}break;case"member":switch(this.data.secondEntity){case"resource":this.attributesManager.removeMemberResourceAttributes(this.data.entityId,this.data.secondEntityId,t).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;case"group":this.attributesManager.removeMemberGroupAttributes(this.data.entityId,this.data.secondEntityId,t).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;default:this.attributesManager.removeMemberAttributes(this.data.entityId,t).subscribe(()=>{this.onSuccess()},()=>this.loading=!1)}break;case"facility":this.attributesManager.removeFacilityAttributes(this.data.entityId,t).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;case"host":this.attributesManager.removeHostAttributes(this.data.entityId,t).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;case"ues":this.attributesManager.removeUesAttributes(this.data.entityId,t).subscribe(()=>{this.onSuccess()});break;case"resource":this.attributesManager.removeResourceAttributes(this.data.entityId,t).subscribe(()=>this.onSuccess())}}onSuccess(){this.translate.get("DIALOGS.DELETE_ATTRIBUTES.SUCCESS").subscribe(t=>{this.notificator.showSuccess(t),this.dialogRef.close(!0)})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(s.so),c.Y36(s.WI),c.Y36(n.V6),c.Y36(o.sK),c.Y36(r.H8))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-delete-attribute-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn","data-cy","delete-attributes",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(t,e){1&t&&(c.TgZ(0,"div"),c.TgZ(1,"h1",0),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.YNc(4,h,1,0,"mat-spinner",1),c.YNc(5,m,13,9,"div",2),c.TgZ(6,"div",3),c.TgZ(7,"button",4),c.NdJ("click",function(){return e.onCancel()}),c._uU(8),c.ALo(9,"translate"),c.qZA(),c.TgZ(10,"button",5),c.NdJ("click",function(){return e.onSubmit()}),c._uU(11),c.ALo(12,"translate"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.Tol(e.theme),c.xp6(2),c.Oqu(c.lcZ(3,9,"DIALOGS.DELETE_ATTRIBUTES.TITLE")),c.xp6(2),c.Q6J("ngIf",e.loading),c.xp6(1),c.Q6J("ngIf",!e.loading),c.xp6(3),c.hij(" ",c.lcZ(9,11,"DIALOGS.DELETE_ATTRIBUTES.CANCEL")," "),c.xp6(2),c.Q6J("disabled",e.loading),c.xp6(1),c.hij(" ",c.lcZ(12,13,"DIALOGS.DELETE_ATTRIBUTES.DELETE")," "))},directives:[s.uh,l.O5,s.H8,u.lW,d.$g,s.xY,a.BZ,a.w1,a.fO,a.Dz,a.as,a.nj,a.ge,a.ev,a.XQ,a.Gk],pipes:[o.X$],styles:[""]}),t})()},541:function(t,e,i){"use strict";i.d(e,{t:function(){return I}});var s=i(65249),a=i(4230),n=i(84140),r=i(40695),c=i(6527),o=i(13572),l=(i(41939),i(60611)),u=i(31572),d=i(84608),h=i(59403),p=i(15980),b=i(19139),f=i(61511),g=i(67806),m=i(41186),E=i(48160);const y=["list"];function S(t,e){1&t&&u._UZ(0,"mat-spinner",7)}function A(t,e){if(1&t&&u._UZ(0,"perun-web-apps-attributes-list",8,9),2&t){const t=u.oxw();u.Q6J("tableId",t.tableId)("filterValue",t.filterValue)("attributes",t.attributes)("selection",t.selection)}}let I=(()=>{class t{constructor(t,e){this.attributesManagerService=t,this.dialog=e,this.attributes=[],this.selection=new a.Ov(!0,[]),this.filterValue="",this.tableId=l.rF,this.loading=!1}ngOnInit(){this.refreshTable()}refreshTable(){switch(this.loading=!0,this.entity){case"member":this.attributesManagerService.getMemberAttributes(this.entityId).subscribe(t=>{this.attributes=t,this.selection.clear(),this.loading=!1});break;case"group":this.attributesManagerService.getGroupAttributes(this.entityId).subscribe(t=>{this.attributes=t,this.selection.clear(),this.loading=!1});break;case"user":this.attributesManagerService.getUserAttributes(this.entityId).subscribe(t=>{this.attributes=t,this.selection.clear(),this.loading=!1});break;case"resource":this.attributesManagerService.getResourceAttributes(this.entityId).subscribe(t=>{this.attributes=t,this.selection.clear(),this.loading=!1});break;case"facility":this.attributesManagerService.getFacilityAttributes(this.entityId).subscribe(t=>{this.attributes=t,this.selection.clear(),this.loading=!1});break;case"vo":this.attributesManagerService.getVoAttributes(this.entityId).subscribe(t=>{this.attributes=t,this.selection.clear(),this.loading=!1})}}applyFilter(t){this.filterValue=t}onCreate(){const t=(0,n.kZ)();t.width="1050px",t.data={entityId:this.entityId,entity:this.entity,notEmptyAttributes:this.attributes,style:this.entity+"-theme"},this.dialog.open(r.n,t).afterClosed().subscribe(t=>{t&&this.refreshTable()})}onSave(){this.list.updateMapAttributes();const t=(0,n.kZ)();t.width="450px",t.data={entityId:this.entityId,entity:this.entity,attributes:this.selection.selected},this.dialog.open(c.wA,t).afterClosed().subscribe(t=>{t&&this.refreshTable()})}onDelete(){const t=(0,n.kZ)();t.width="450px",t.data={entityId:this.entityId,entity:this.entity,attributes:this.selection.selected},this.dialog.open(o.k,t).afterClosed().subscribe(t=>{t&&this.refreshTable()})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(s.H8),u.Y36(d.uw))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-one-entity-attribute-page"]],viewQuery:function(t,e){if(1&t&&u.Gf(y,5),2&t){let t;u.iGM(t=u.CRH())&&(e.list=t.first)}},inputs:{entity:"entity",entityId:"entityId"},decls:13,vars:14,consts:[[1,"mt-2",3,"refresh"],["mat-flat-button","","color","accent","data-cy","add-attributes",1,"mr-2","mt-2","action-button",3,"click"],["mat-flat-button","","color","accent",1,"mr-2","mt-2",3,"disabled","click"],["color","warn","mat-flat-button","","data-cy","remove-attributes",1,"mt-2","mr-2",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","filterValue","attributes","selection",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"tableId","filterValue","attributes","selection"],["list",""]],template:function(t,e){1&t&&(u.TgZ(0,"perun-web-apps-refresh-button",0),u.NdJ("refresh",function(){return e.refreshTable()}),u.qZA(),u.TgZ(1,"button",1),u.NdJ("click",function(){return e.onCreate()}),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"button",2),u.NdJ("click",function(){return e.onSave()}),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.TgZ(7,"button",3),u.NdJ("click",function(){return e.onDelete()}),u._uU(8),u.ALo(9,"translate"),u.qZA(),u.TgZ(10,"perun-web-apps-immediate-filter",4),u.NdJ("filter",function(t){return e.applyFilter(t)}),u.qZA(),u.YNc(11,S,1,0,"mat-spinner",5),u.YNc(12,A,2,4,"perun-web-apps-attributes-list",6)),2&t&&(u.xp6(2),u.hij(" ",u.lcZ(3,8,"USER_DETAIL.SETTINGS.ATTRIBUTES.CREATE"),"\n"),u.xp6(2),u.Q6J("disabled",0===e.selection.selected.length),u.xp6(1),u.hij(" ",u.lcZ(6,10,"USER_DETAIL.SETTINGS.ATTRIBUTES.SAVE"),"\n"),u.xp6(2),u.Q6J("disabled",0===e.selection.selected.length),u.xp6(1),u.hij(" ",u.lcZ(9,12,"USER_DETAIL.SETTINGS.ATTRIBUTES.DELETE"),"\n"),u.xp6(2),u.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),u.xp6(1),u.Q6J("ngIf",e.loading),u.xp6(1),u.Q6J("ngIf",!e.loading))},directives:[h.t,p.lW,b.L,f.O5,g.$g,m.p],pipes:[E.X$],styles:[""]}),t})()},3417:function(t,e,i){"use strict";i.d(e,{Y:function(){return D}});var s=i(65249),a=(i(41939),i(4230)),n=i(13572),r=i(84140),c=i(6527),o=i(40695),l=i(67004),u=i(31572),d=i(84608),h=i(61511),p=i(67806),b=i(39571),f=i(59403),g=i(15980),m=i(19139),E=i(37665),y=i(42847),S=i(44973),A=i(48160);let I=(()=>{class t{constructor(){this.memberSelected=new u.vpe,this.memberFullNameFunction=t=>(0,r.bD)(t.user)}ngOnInit(){this.members=this.members.sort(r.fx)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Xpm({type:t,selectors:[["perun-web-apps-member-search-select"]],inputs:{members:"members"},outputs:{memberSelected:"memberSelected"},decls:4,vars:12,consts:[[3,"entities","searchFunction","mainTextFunction","selectPlaceholder","findPlaceholder","noEntriesText","entitySelected"]],template:function(t,e){1&t&&(u.TgZ(0,"perun-web-apps-entity-search-select",0),u.NdJ("entitySelected",function(t){return e.memberSelected.emit(t)}),u.ALo(1,"translate"),u.ALo(2,"translate"),u.ALo(3,"translate"),u.qZA()),2&t&&u.Q6J("entities",e.members)("searchFunction",e.memberFullNameFunction)("mainTextFunction",e.memberFullNameFunction)("selectPlaceholder",u.lcZ(1,6,"SHARED_LIB.PERUN.COMPONENTS.MEMBER_SEARCH_SELECT.SELECT_MEMBER"))("findPlaceholder",u.lcZ(2,8,"SHARED_LIB.PERUN.COMPONENTS.MEMBER_SEARCH_SELECT.FIND_MEMBER"))("noEntriesText",u.lcZ(3,10,"SHARED_LIB.PERUN.COMPONENTS.MEMBER_SEARCH_SELECT.NO_MEMBER_FOUND"))},directives:[S.i],pipes:[A.X$],styles:[""]}),t})(),T=(()=>{class t{constructor(){this.facilitySelected=new u.vpe,this.nameFunction=t=>t.name}ngOnInit(){this.facilities=this.facilities.sort(r.aC)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Xpm({type:t,selectors:[["perun-web-apps-facility-search-select"]],inputs:{facilities:"facilities"},outputs:{facilitySelected:"facilitySelected"},decls:4,vars:12,consts:[[3,"entities","searchFunction","mainTextFunction","selectPlaceholder","findPlaceholder","noEntriesText","entitySelected"]],template:function(t,e){1&t&&(u.TgZ(0,"perun-web-apps-entity-search-select",0),u.NdJ("entitySelected",function(t){return e.facilitySelected.emit(t)}),u.ALo(1,"translate"),u.ALo(2,"translate"),u.ALo(3,"translate"),u.qZA()),2&t&&u.Q6J("entities",e.facilities)("searchFunction",e.nameFunction)("mainTextFunction",e.nameFunction)("selectPlaceholder",u.lcZ(1,6,"SHARED_LIB.PERUN.COMPONENTS.FACILITY_SEARCH_SELECT.SELECT_FACILITY"))("findPlaceholder",u.lcZ(2,8,"SHARED_LIB.PERUN.COMPONENTS.FACILITY_SEARCH_SELECT.FIND_FACILITY"))("noEntriesText",u.lcZ(3,10,"SHARED_LIB.PERUN.COMPONENTS.FACILITY_SEARCH_SELECT.NO_FACILITY_FOUND"))},directives:[S.i],pipes:[A.X$],styles:[""]}),t})();var Z=i(7927),x=i(41186);const w=["list"];function R(t,e){1&t&&u._UZ(0,"mat-spinner",4)}function L(t,e){if(1&t&&(u.TgZ(0,"app-alert",5),u._uU(1),u.qZA()),2&t){const t=u.oxw();u.xp6(1),u.Oqu(t.noEntityMessage)}}function C(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"perun-web-apps-group-search-select",18),u.NdJ("groupSelected",function(e){return u.CHM(t),u.oxw(2).specifySecondEntity(e)}),u.qZA()}if(2&t){const t=u.oxw(2);u.Q6J("groups",t.entityValues)("firstSelectedGroup",t.specificSecondEntity)("displayStatus",!0)}}function M(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"perun-web-apps-resource-search-select",19),u.NdJ("resourceSelected",function(e){return u.CHM(t),u.oxw(2).specifySecondEntity(e)}),u.qZA()}if(2&t){const t=u.oxw(2);u.Q6J("resources",t.entityValues)}}function _(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"perun-web-apps-member-search-select",20),u.NdJ("memberSelected",function(e){return u.CHM(t),u.oxw(2).specifySecondEntity(e)}),u.qZA()}if(2&t){const t=u.oxw(2);u.Q6J("members",t.entityValues)}}function N(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"perun-web-apps-facility-search-select",21),u.NdJ("facilitySelected",function(e){return u.CHM(t),u.oxw(2).specifySecondEntity(e)}),u.qZA()}if(2&t){const t=u.oxw(2);u.Q6J("facilities",t.entityValues)}}function v(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"perun-web-apps-user-search-select",22),u.NdJ("userSelected",function(e){return u.CHM(t),u.oxw(2).specifySecondEntity(e)}),u.qZA()}if(2&t){const t=u.oxw(2);u.Q6J("users",t.entityValues)}}function k(t,e){1&t&&u._UZ(0,"mat-spinner",4)}function U(t,e){if(1&t&&u._UZ(0,"perun-web-apps-attributes-list",23,24),2&t){const t=u.oxw(2);u.Q6J("attributes",t.attributes)("filterValue",t.filterValue)("selection",t.selection)}}function O(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"div",6),u.YNc(2,C,1,3,"perun-web-apps-group-search-select",7),u.YNc(3,M,1,1,"perun-web-apps-resource-search-select",8),u.YNc(4,_,1,1,"perun-web-apps-member-search-select",9),u.YNc(5,N,1,1,"perun-web-apps-facility-search-select",10),u.YNc(6,v,1,1,"perun-web-apps-user-search-select",11),u.qZA(),u.TgZ(7,"perun-web-apps-refresh-button",12),u.NdJ("refresh",function(){u.CHM(t);const e=u.oxw();return e.getAttributes(e.specificSecondEntity.id)}),u.qZA(),u.TgZ(8,"button",13),u.NdJ("click",function(){u.CHM(t);const e=u.oxw();return e.onAdd(e.specificSecondEntity.id)}),u._uU(9),u.ALo(10,"translate"),u.qZA(),u.TgZ(11,"button",14),u.NdJ("click",function(){u.CHM(t);const e=u.oxw();return e.onSave(e.specificSecondEntity.id)}),u._uU(12),u.ALo(13,"translate"),u.qZA(),u.TgZ(14,"button",15),u.NdJ("click",function(){u.CHM(t);const e=u.oxw();return e.onDelete(e.specificSecondEntity.id)}),u._uU(15),u.ALo(16,"translate"),u.qZA(),u.TgZ(17,"perun-web-apps-immediate-filter",16),u.NdJ("filter",function(e){return u.CHM(t),u.oxw().applyFilter(e)}),u.qZA(),u.YNc(18,k,1,0,"mat-spinner",1),u.YNc(19,U,2,3,"perun-web-apps-attributes-list",17),u.qZA()}if(2&t){const t=u.oxw();u.xp6(2),u.Q6J("ngIf","group"===t.secondEntity),u.xp6(1),u.Q6J("ngIf","resource"===t.secondEntity),u.xp6(1),u.Q6J("ngIf","member"===t.secondEntity),u.xp6(1),u.Q6J("ngIf","facility"===t.secondEntity),u.xp6(1),u.Q6J("ngIf","user"===t.secondEntity),u.xp6(3),u.hij(" ",u.lcZ(10,13,"MEMBER_DETAIL.SETTINGS.ATTRIBUTES.CREATE")," "),u.xp6(2),u.Q6J("disabled",0===t.selection.selected.length),u.xp6(1),u.hij(" ",u.lcZ(13,15,"MEMBER_DETAIL.SETTINGS.ATTRIBUTES.SAVE")," "),u.xp6(2),u.Q6J("disabled",0===t.selection.selected.length),u.xp6(1),u.hij(" ",u.lcZ(16,17,"MEMBER_DETAIL.SETTINGS.ATTRIBUTES.DELETE")," "),u.xp6(2),u.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),u.xp6(1),u.Q6J("ngIf",t.innerLoading),u.xp6(1),u.Q6J("ngIf",!t.innerLoading)}}let D=(()=>{class t{constructor(t,e,i,s,n,r){this.attributesManagerService=t,this.resourcesManagerService=e,this.facilitiesManagerService=i,this.groupsManagerService=s,this.membersManager=n,this.dialog=r,this.entityValues=[],this.attributes=[],this.selection=new a.Ov(!0,[]),this.allowedStatuses=["INVALID","VALID"],this.loading=!1,this.innerLoading=!1,this.filterValue=""}ngOnInit(){this.loadEntityValues(),this.setMessages(this.secondEntity.toLowerCase())}loadEntityValues(){switch(this.loading=!0,this.firstEntity){case"member":switch(this.secondEntity){case"resource":this.resourcesManagerService.getAssignedResourcesWithStatus(this.firstEntityId).subscribe(t=>{this.entityValues=t.map(t=>t.enrichedResource.resource),this.preselectEntity(),this.loading=!1});break;case"group":this.groupsManagerService.getMemberGroups(this.firstEntityId).subscribe(t=>{this.entityValues=t,this.preselectEntity(),this.loading=!1})}break;case"group":switch(this.secondEntity){case"resource":this.resourcesManagerService.getResourceAssignments(this.firstEntityId).subscribe(t=>{this.entityValues=t.map(t=>{const e=t.enrichedResource.resource;return e.status=t.status,e}),this.preselectEntity(),this.loading=!1});break;case"member":this.membersManager.getCompleteRichMembersForGroup(this.firstEntityId,!1,this.allowedStatuses,null,[l.r.MEMBER_CORE_ID]).subscribe(t=>{this.entityValues=t,this.preselectEntity(),this.loading=!1})}break;case"user":this.facilitiesManagerService.getAssignedFacilitiesByUser(this.firstEntityId).subscribe(t=>{this.entityValues=t,this.preselectEntity(),this.loading=!1});break;case"resource":switch(this.secondEntity){case"member":this.resourcesManagerService.getAssignedMembersWithStatus(this.firstEntityId).subscribe(t=>{this.entityValues=t.map(t=>t.richMember),this.preselectEntity(),this.loading=!1});break;case"group":this.resourcesManagerService.getGroupAssignments(this.firstEntityId).subscribe(t=>{this.entityValues=t.map(t=>{const e=t.enrichedGroup.group;return e.status=t.status,e}),this.preselectEntity(),this.loading=!1})}break;case"facility":this.facilitiesManagerService.getAssignedUsers(this.firstEntityId).subscribe(t=>{this.entityValues=t,this.preselectEntity(),this.loading=!1})}}preselectEntity(){0!==this.entityValues.length&&this.findInitiallySelectedEntity()}findInitiallySelectedEntity(){let t=this.entityValues[0];const e=(0,r.vL)(this.entityKey());if(e)for(const i of this.entityValues)if(i.id===e[0]){t=i;break}this.specifySecondEntity(t)}entityKey(){switch(this.secondEntity){case"group":return"groups";default:return""}}getAttributes(t){switch(this.innerLoading=!0,this.firstEntity){case"member":switch(this.secondEntity){case"resource":this.attributesManagerService.getMemberResourceAttributes(this.firstEntityId,t).subscribe(t=>{this.attributes=t,this.innerLoading=!1});break;case"group":this.attributesManagerService.getMemberGroupAttributes(this.firstEntityId,t).subscribe(t=>{this.attributes=t,this.innerLoading=!1})}break;case"group":switch(this.secondEntity){case"resource":this.attributesManagerService.getGroupResourceAttributes(this.firstEntityId,t).subscribe(t=>{this.attributes=t,this.innerLoading=!1});break;case"member":this.attributesManagerService.getMemberGroupAttributes(t,this.firstEntityId).subscribe(t=>{this.attributes=t,this.innerLoading=!1})}break;case"user":this.attributesManagerService.getUserFacilityAttributes(this.firstEntityId,t).subscribe(t=>{this.attributes=t,this.innerLoading=!1});break;case"resource":switch(this.secondEntity){case"member":this.attributesManagerService.getMemberResourceAttributes(t,this.firstEntityId).subscribe(t=>{this.attributes=t,this.innerLoading=!1});break;case"group":this.attributesManagerService.getGroupResourceAttributes(t,this.firstEntityId).subscribe(t=>{this.attributes=t,this.innerLoading=!1})}break;case"facility":this.attributesManagerService.getUserFacilityAttributes(t,this.firstEntityId).subscribe(t=>{this.attributes=t,this.innerLoading=!1})}}setMessages(t){this.noEntityMessage=`No ${t} assigned`}onSave(t){this.list.updateMapAttributes();const e=(0,r.kZ)();e.width="450px",e.data={entityId:this.firstEntityId,entity:this.firstEntity,secondEntity:this.secondEntity,secondEntityId:t,attributes:this.selection.selected},this.dialog.open(c.wA,e).afterClosed().subscribe(e=>{e&&(this.selection.clear(),this.getAttributes(t))})}onDelete(t){const e=(0,r.kZ)();e.width="450px",e.data={entityId:this.firstEntityId,entity:this.firstEntity,secondEntity:this.secondEntity,secondEntityId:t,attributes:this.selection.selected,theme:`${this.firstEntity}-theme`},this.dialog.open(n.k,e).afterClosed().subscribe(e=>{e&&(this.selection.clear(),this.getAttributes(t))})}onAdd(t){const e=(0,r.kZ)();e.width="1050px",e.data={entityId:this.firstEntityId,entity:this.firstEntity,secondEntity:this.secondEntity,secondEntityId:t,notEmptyAttributes:this.attributes,style:`${this.firstEntity}-theme`},this.dialog.open(o.n,e).afterClosed().subscribe(e=>{e&&(this.selection.clear(),this.getAttributes(t))})}specifySecondEntity(t){t&&(this.specificSecondEntity=t,this.getAttributes(this.specificSecondEntity.id))}applyFilter(t){this.filterValue=t}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(s.H8),u.Y36(s.xk),u.Y36(s.IQ),u.Y36(s.ff),u.Y36(s.uq),u.Y36(d.uw))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-two-entity-attribute-page"]],viewQuery:function(t,e){if(1&t&&u.Gf(w,5),2&t){let t;u.iGM(t=u.CRH())&&(e.list=t.first)}},inputs:{firstEntityId:"firstEntityId",firstEntity:"firstEntity",secondEntity:"secondEntity"},decls:4,vars:3,consts:[[1,"mt-3"],["class","ml-auto mr-auto",4,"ngIf"],["alert_type","warn",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],["alert_type","warn"],[1,"flex-row"],[3,"groups","firstSelectedGroup","displayStatus","groupSelected",4,"ngIf"],[3,"resources","resourceSelected",4,"ngIf"],[3,"members","memberSelected",4,"ngIf"],[3,"facilities","facilitySelected",4,"ngIf"],[3,"users","userSelected",4,"ngIf"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2","action-button",3,"click"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],[3,"placeholder","filter"],[3,"attributes","filterValue","selection",4,"ngIf"],[3,"groups","firstSelectedGroup","displayStatus","groupSelected"],[3,"resources","resourceSelected"],[3,"members","memberSelected"],[3,"facilities","facilitySelected"],[3,"users","userSelected"],[3,"attributes","filterValue","selection"],["list",""]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.YNc(1,R,1,0,"mat-spinner",1),u.YNc(2,L,2,1,"app-alert",2),u.YNc(3,O,20,19,"div",3),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngIf",e.loading),u.xp6(1),u.Q6J("ngIf",0===e.entityValues.length&&!e.loading),u.xp6(1),u.Q6J("ngIf",0!==e.entityValues.length))},directives:[h.O5,p.$g,b.w,f.t,g.lW,m.L,E.h,y.L,I,T,Z.S,x.p],pipes:[A.X$],styles:[".w-35[_ngcontent-%COMP%]{width:35%}"]}),t})()},77889:function(t,e,i){"use strict";i.d(e,{C:function(){return V}});var s=i(58623),a=i(67033),n=i(4230),r=i(84140),c=i(68416),o=i(31572),l=i(82819),u=i(61511),d=i(29236),h=i(43691),p=i(36922),b=i(84534),f=i(39571),g=i(48160),m=i(22196),E=i(92898),y=i(44031),S=i(31447);function A(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"mat-checkbox",21),o.NdJ("change",function(e){o.CHM(t);const i=o.oxw(2);return e?i.masterToggle():null}),o.qZA()}if(2&t){const t=o.oxw(2);o.Q6J("aria-label",t.checkboxLabel())("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())}}function I(t,e){if(1&t&&(o.TgZ(0,"th",19),o.YNc(1,A,1,3,"mat-checkbox",20),o.qZA()),2&t){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.selection.isMultipleSelection())}}function T(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"td",22),o.TgZ(1,"mat-checkbox",23),o.NdJ("change",function(e){const i=o.CHM(t).$implicit,s=o.oxw();return e?s.selection.toggle(i):null})("click",function(t){return t.stopPropagation()}),o.ALo(2,"lowercase"),o.qZA(),o.qZA()}if(2&t){const t=e.$implicit,i=o.oxw();o.xp6(1),o.Q2q("data-cy","",o.lcZ(2,4,t.firstName),"-checkbox"),o.Q6J("aria-label",i.checkboxLabel(t))("checked",i.selection.isSelected(t))("disabled",i.disableSelf&&t.id===i.principalId&&!i.authResolver.isPerunAdmin())}}function Z(t,e){1&t&&o._UZ(0,"th",24)}function x(t,e){1&t&&(o.TgZ(0,"mat-icon",28),o.ALo(1,"translate"),o._uU(2," account_circle "),o.qZA()),2&t&&o.s9C("matTooltip",o.lcZ(1,1,"MANAGERS_LIST.PERSON"))}function w(t,e){if(1&t&&(o._UZ(0,"mat-icon",29),o.ALo(1,"translate")),2&t){const t=o.oxw(2);o.s9C("matTooltip",o.lcZ(1,2,"MANAGERS_LIST.SERVICE")),o.Q6J("svgIcon",t.svgIcon)}}function R(t,e){if(1&t&&(o.TgZ(0,"td",25),o.YNc(1,x,3,3,"mat-icon",26),o.YNc(2,w,2,4,"mat-icon",27),o.qZA()),2&t){const t=e.$implicit;o.xp6(1),o.Q6J("ngIf",!t.serviceUser),o.xp6(1),o.Q6J("ngIf",t.serviceUser)}}function L(t,e){1&t&&(o.TgZ(0,"th",30),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"MANAGERS_LIST.ID")))}function C(t,e){if(1&t&&(o.TgZ(0,"td",25),o._uU(1),o.qZA()),2&t){const t=e.$implicit;o.xp6(1),o.hij(" ",t.id," ")}}function M(t,e){1&t&&(o.TgZ(0,"th",30),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"MANAGERS_LIST.NAME")))}function _(t,e){if(1&t&&(o.TgZ(0,"td",31),o._uU(1),o.ALo(2,"userFullName"),o.qZA()),2&t){const t=e.$implicit;o.xp6(1),o.Oqu(o.lcZ(2,1,t))}}function N(t,e){1&t&&(o.TgZ(0,"th",30),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"MANAGERS_LIST.ORGANIZATION")))}function v(t,e){if(1&t&&(o.TgZ(0,"td",31),o._uU(1),o.ALo(2,"userVo"),o.qZA()),2&t){const t=e.$implicit;o.xp6(1),o.Oqu(o.lcZ(2,1,t))}}function k(t,e){1&t&&(o.TgZ(0,"th",30),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"MANAGERS_LIST.EMAIL")))}function U(t,e){if(1&t&&(o.TgZ(0,"td",31),o._uU(1),o.ALo(2,"userEmail"),o.qZA()),2&t){const t=e.$implicit;o.xp6(1),o.Oqu(o.lcZ(2,1,t))}}function O(t,e){1&t&&(o.TgZ(0,"th",30),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"MANAGERS_LIST.LOGINS")))}function D(t,e){if(1&t&&(o.TgZ(0,"td",31),o._uU(1),o.ALo(2,"userLogins"),o.qZA()),2&t){const t=e.$implicit;o.xp6(1),o.Oqu(o.lcZ(2,1,t))}}function q(t,e){1&t&&o._UZ(0,"tr",32)}const F=function(t){return["/admin/users",t]},J=function(t){return["/myProfile/service-identities",t]};function Y(t,e){if(1&t&&o._UZ(0,"tr",33),2&t){const t=e.$implicit,i=o.oxw();o.ekj("cursor-pointer",!i.disableRouting),o.Q6J("perunWebAppsForceRouterLink",i.disableRouting?null:i.routeToAdmin?o.VKq(4,F,t.id):o.VKq(6,J,t.id))("perunWebAppsMiddleClickRouterLink",i.disableRouting?null:i.routeToAdmin?o.VKq(8,F,t.id):o.VKq(10,J,t.id))}}function Q(t,e){if(1&t&&(o.TgZ(0,"app-alert",34),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t){const t=o.oxw();o.xp6(1),o.hij(" ",t.noUsersFoundLabel?t.noUsersFoundLabel:o.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_USERS"),"\n")}}function P(t,e){1&t&&(o.TgZ(0,"app-alert",34),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}let V=(()=>{class t{constructor(t,e,i){this.authResolver=t,this.tableCheckbox=e,this.storeService=i,this.svgIcon="perun-service-identity-black",this.selection=new n.Ov(!0,[]),this.displayedColumns=["select","user","id","name","email","logins","organization"],this.routeToAdmin=!0,this.disableRouting=!1,this.filter="",this.disableSelf=!1,this.pageSizeOptions=r.f7}set matSort(t){this.sort=t}getDataForColumn(t,e){var i;switch(e){case"id":return t.id.toString();case"user":return t.serviceUser?"true":"false";case"name":return t?t.lastName?t.lastName:null!==(i=t.firstName)&&void 0!==i?i:"":"";case"organization":return(0,r.OV)(t);case"email":return(0,r.kN)(t);case"logins":return(0,r.lt)(t);default:return""}}getExportDataForColumn(t,e){switch(e){case"id":return t.id.toString();case"user":return t.serviceUser?"service-user":"user";case"name":return t?(0,r.bD)(t):"";case"organization":return(0,r.OV)(t);case"email":return(0,r.kN)(t);case"logins":return(0,r.lt)(t);default:return""}}exportData(t){(0,r.O6)((0,r.Xn)(this.dataSource.filteredData,this.displayedColumns,this.getExportDataForColumn,this),t)}setDataSource(){this.dataSource||(this.dataSource=new a.by,this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filterPredicate=(t,e)=>(0,r.Sd)(t,e,this.displayedColumns,this.getDataForColumn,this),this.dataSource.sortData=(t,e)=>(0,r.pR)(t,e,this.getDataForColumn,this)),this.dataSource.filter=this.filter,this.dataSource.data=this.users}ngOnChanges(){this.principalId=this.storeService.getPerunPrincipal().userId,this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(t=>"id"!==t)),this.setDataSource()}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filter,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filter,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.x4),o.Y36(c.UA),o.Y36(c.d6))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-users-list"]],viewQuery:function(t,e){if(1&t&&(o.Gf(s.YE,7),o.Gf(r.l9,7)),2&t){let t;o.iGM(t=o.CRH())&&(e.matSort=t.first),o.iGM(t=o.CRH())&&(e.child=t.first)}},inputs:{users:"users",selection:"selection",displayedColumns:"displayedColumns",routeToAdmin:"routeToAdmin",disableRouting:"disableRouting",filter:"filter",tableId:"tableId",noUsersFoundLabel:"noUsersFoundLabel",disableSelf:"disableSelf"},features:[o.TTD],decls:28,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"dataLength","tableId","pageSizeOptions","exportData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","user"],["mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","organization"],["matColumnDef","email"],["matColumnDef","logins"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",3,"cursor-pointer","perunWebAppsForceRouterLink","perunWebAppsMiddleClickRouterLink",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change",4,"ngIf"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","disabled","change","click"],["mat-header-cell",""],["mat-cell","",1,"static-column-size"],["class","align-bottom",3,"matTooltip",4,"ngIf"],["class","align-bottom",3,"matTooltip","svgIcon",4,"ngIf"],[1,"align-bottom",3,"matTooltip"],[1,"align-bottom",3,"matTooltip","svgIcon"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"perunWebAppsForceRouterLink","perunWebAppsMiddleClickRouterLink"],["alert_type","warn"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"perun-web-apps-table-wrapper",1),o.NdJ("exportData",function(t){return e.exportData(t)}),o.TgZ(2,"table",2),o.ynx(3,3),o.YNc(4,I,2,1,"th",4),o.YNc(5,T,3,6,"td",5),o.BQk(),o.ynx(6,6),o.YNc(7,Z,1,0,"th",7),o.YNc(8,R,3,2,"td",8),o.BQk(),o.ynx(9,9),o.YNc(10,L,3,3,"th",10),o.YNc(11,C,2,1,"td",8),o.BQk(),o.ynx(12,11),o.YNc(13,M,3,3,"th",10),o.YNc(14,_,3,3,"td",12),o.BQk(),o.ynx(15,13),o.YNc(16,N,3,3,"th",10),o.YNc(17,v,3,3,"td",12),o.BQk(),o.ynx(18,14),o.YNc(19,k,3,3,"th",10),o.YNc(20,U,3,3,"td",12),o.BQk(),o.ynx(21,15),o.YNc(22,O,3,3,"th",10),o.YNc(23,D,3,3,"td",12),o.BQk(),o.YNc(24,q,1,0,"tr",16),o.YNc(25,Y,1,12,"tr",17),o.qZA(),o.qZA(),o.qZA(),o.YNc(26,Q,3,3,"app-alert",18),o.YNc(27,P,3,3,"app-alert",18)),2&t&&(o.Q6J("hidden",0===e.users.length||!e.dataSource||0===e.dataSource.filteredData.length),o.xp6(1),o.Q6J("dataLength",e.dataSource.filteredData.length)("tableId",e.tableId)("pageSizeOptions",e.pageSizeOptions),o.xp6(1),o.Q6J("dataSource",e.dataSource),o.xp6(22),o.Q6J("matHeaderRowDef",e.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",e.displayedColumns),o.xp6(1),o.Q6J("ngIf",0===e.users.length),o.xp6(1),o.Q6J("ngIf",0===e.dataSource.filteredData.length&&0!==e.users.length))},directives:[l.l,a.BZ,s.YE,a.w1,a.fO,a.Dz,a.as,a.nj,u.O5,a.ge,d.oG,a.ev,h.Hw,p.gM,s.nU,a.XQ,a.Gk,b.Kd,b.YH,f.w],pipes:[u.i8,g.X$,m.d,E.Z,y.S,S.g],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),t})()},8557:function(t,e,i){"use strict";i.d(e,{L:function(){return f}});var s=i(31572),a=i(84608),n=i(57629),r=i(61511),c=i(71522),o=i(84534),l=i(43691),u=i(82877),d=i(48160);const h=function(t){return[t]};function p(t,e){if(1&t&&(s.TgZ(0,"div",3),s.TgZ(1,"a",4),s.ALo(2,"multiWordDataCy"),s.ALo(3,"translate"),s._UZ(4,"mat-icon",5),s._uU(5),s.ALo(6,"translate"),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.Gre("",t.style," item-itself"),s.Q6J("routerLink",t.url)("perunWebAppsMiddleClickRouterLink",s.VKq(14,h,t.url)),s.uIk("data-cy",s.lcZ(2,8,s.lcZ(3,10,t.label))),s.xp6(3),s.Q6J("svgIcon",t.cssIcon),s.xp6(1),s.hij(" ",s.lcZ(6,12,t.label)," ")}}function b(t,e){if(1&t&&(s.TgZ(0,"div",1),s.YNc(1,p,7,16,"div",2),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.items)}}let f=(()=>{class t{constructor(t,e){this.dialog=t,this.route=e,this.size="large"}ngOnInit(){this.route.params.subscribe(t=>{this.voId=t.voId})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.uw),s.Y36(n.gz))},t.\u0275cmp=s.Xpm({type:t,selectors:[["perun-web-apps-menu-buttons-field"]],inputs:{items:"items",size:"size"},decls:1,vars:1,consts:[["class","items-container",4,"ngIf"],[1,"items-container"],["class","item-itself-container","mat-ripple","",4,"ngFor","ngForOf"],["mat-ripple","",1,"item-itself-container"],["queryParamsHandling","merge",3,"routerLink","perunWebAppsMiddleClickRouterLink"],[1,"item-pic","perun-icon",3,"svgIcon"]],template:function(t,e){1&t&&s.YNc(0,b,2,1,"div",0),2&t&&s.Q6J("ngIf","small"===e.size)},directives:[r.O5,r.sg,c.wG,n.yS,o.YH,l.Hw],pipes:[u.R,d.X$],styles:[".items-container[_ngcontent-%COMP%]{display:grid;grid-gap:0;grid-template-columns:repeat(auto-fill,minmax(208px,1fr));margin:0 -8px}@media (max-width:768px){.items-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(148px,1fr))}}.item-pic[_ngcontent-%COMP%]{color:currentColor;transform:scale(3);height:74px;margin-bottom:22px}.item-itself-container[_ngcontent-%COMP%]{margin:8px}.item-itself[_ngcontent-%COMP%]{text-align:center;min-height:186px;height:100%;padding:20px;display:flex;flex-direction:column;align-items:center;font-size:1.25rem}.item-itself[_ngcontent-%COMP%]:hover{text-decoration:none}.item-itself[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;margin-bottom:10px}@media (max-width:768px){.item-itself[_ngcontent-%COMP%]{min-height:150px;padding:10px}.item-itself[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;margin-bottom:10px}}"]}),t})()},42847:function(t,e,i){"use strict";i.d(e,{L:function(){return c}});var s=i(31572),a=i(84140),n=i(44973),r=i(48160);let c=(()=>{class t{constructor(){this.resource=null,this.displayStatus=!0,this.resourceSelected=new s.vpe,this.nameFunction=t=>t.name,this.secondaryFunction=()=>null}ngOnInit(){this.resources=this.resources.sort(a.aC)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["perun-web-apps-resource-search-select"]],inputs:{resource:"resource",resources:"resources",displayStatus:"displayStatus"},outputs:{resourceSelected:"resourceSelected"},decls:4,vars:15,consts:[[3,"entity","entities","displayStatus","searchFunction","mainTextFunction","secondaryTextFunction","selectPlaceholder","findPlaceholder","noEntriesText","entitySelected"]],template:function(t,e){1&t&&(s.TgZ(0,"perun-web-apps-entity-search-select",0),s.NdJ("entitySelected",function(t){return e.resourceSelected.emit(t)}),s.ALo(1,"translate"),s.ALo(2,"translate"),s.ALo(3,"translate"),s.qZA()),2&t&&s.Q6J("entity",e.resource)("entities",e.resources)("displayStatus",e.displayStatus)("searchFunction",e.nameFunction)("mainTextFunction",e.nameFunction)("secondaryTextFunction",e.secondaryFunction)("selectPlaceholder",s.lcZ(1,9,"SHARED_LIB.PERUN.COMPONENTS.RESOURCE_SEARCH_SELECT.SELECT_RESOURCE"))("findPlaceholder",s.lcZ(2,11,"SHARED_LIB.PERUN.COMPONENTS.RESOURCE_SEARCH_SELECT.FIND_RESOURCE"))("noEntriesText",s.lcZ(3,13,"SHARED_LIB.PERUN.COMPONENTS.RESOURCE_SEARCH_SELECT.NO_RESOURCE_FOUND"))},directives:[n.i],pipes:[r.X$],styles:[""]}),t})()}}]);