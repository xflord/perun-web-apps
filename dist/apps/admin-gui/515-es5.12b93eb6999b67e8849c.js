!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}(self.webpackChunkperun_web_apps=self.webpackChunkperun_web_apps||[]).push([[515],{93215:function(e,t,n){"use strict";n.d(t,{l:function(){return U}});var s=n(84608),a=n(65249),o=n(68416),u=n(60611),l=n(4230),c=n(67004),p=n(16073),d=n(31572),f=n(48160),g=n(66283),m=n(80340),h=n(15980),I=n(43691),v=n(61511),Z=n(77889),A=n(39571),S=n(67806);function E(e,t){if(1&e&&d._UZ(0,"app-users-list",14),2&e){var n=d.oxw(2);d.Q6J("tableId",n.tableId)("displayedColumns",n.displayedColumns)("users",n.identities)("disableRouting",!0)("selection",n.selection)}}function T(e,t){if(1&e&&(d.TgZ(0,"div"),d.YNc(1,E,1,5,"app-users-list",13),d.qZA()),2&e){var n=d.oxw();d.xp6(1),d.Q6J("ngIf",void 0!==n.identities&&n.identities.length>0)}}function b(e,t){1&e&&(d.TgZ(0,"app-alert",15),d._uU(1),d.ALo(2,"translate"),d.qZA()),2&e&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"DIALOGS.CONNECT_IDENTITY.SEARCH_HINT")," "))}function N(e,t){1&e&&(d.TgZ(0,"app-alert",16),d._uU(1),d.ALo(2,"translate"),d.qZA()),2&e&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"DIALOGS.CONNECT_IDENTITY.NO_IDENTITIES")," "))}function R(e,t){1&e&&d._UZ(0,"mat-spinner",17)}var U=function(){var e=function(){function e(t,n,s,r,a,o){i(this,e),this.dialogRef=t,this.data=n,this.userManager=s,this.storeService=r,this.notificator=a,this.translate=o,this.loading=!1,this.selection=new l.Ov(!1,[]),this.firstSearchDone=!1,this.displayedColumns=["select","id","user","name","email","logins","organization"],this.tableId=u.Iz}return r(e,[{key:"ngOnInit",value:function(){this.target=this.data.target,this.theme=this.data.theme,this.userId=this.data.userId,this.isService=this.data.isService,this.searchCtrl=new p.NI("",[p.kI.required,p.kI.pattern(".*[\\S]+.*")])}},{key:"onAdd",value:function(){var e,t,n=this;this.loading=!0,this.isService?(e=this.selection.selected[0].id,t=this.userId):(e=this.userId,t=this.selection.selected[0].id),this.userManager.addSpecificUserOwner(e,t).subscribe(function(){n.notificator.showSuccess(n.translate.instant("DIALOGS.CONNECT_IDENTITY.SUCCESS")),n.dialogRef.close(!0)})}},{key:"onCancel",value:function(){this.dialogRef.close(!1)}},{key:"onSearchByString",value:function(){var e=this;if(this.searchCtrl.invalid)this.searchCtrl.markAllAsTouched();else{this.loading=!0,this.firstSearchDone=!0;var t=[c.r.USER_DEF_ORGANIZATION,c.r.USER_DEF_PREFERRED_MAIL];t=t.concat(this.storeService.getLoginAttributeNames()),this.userManager.findRichUsersWithAttributes(this.searchCtrl.value,t).subscribe(function(t){e.identities=e.filterIdentities(t),e.loading=!1},function(){e.loading=!1})}}},{key:"onKeyInput",value:function(e){"Enter"===e.key&&this.onSearchByString()}},{key:"filterIdentities",value:function(e){return e.filter(this.isService?function(e){return!e.serviceUser}:function(e){return e.serviceUser})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(s.so),d.Y36(s.WI),d.Y36(a.Fv),d.Y36(o.d6),d.Y36(o.V6),d.Y36(f.sK))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-connect-identity-dialog"]],decls:26,vars:25,consts:[[3,"keyup"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],[1,"mr-2","search-field","no-border-mat-input"],["matInput","","autocomplete","false",3,"placeholder","formControl"],["mat-flat-button","","color","primary",1,"mr-2","search-btn",3,"disabled","click"],[4,"ngIf"],["alert_type","info",4,"ngIf"],["alert_type","warn",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"],[3,"tableId","displayedColumns","users","disableRouting","selection",4,"ngIf"],[3,"tableId","displayedColumns","users","disableRouting","selection"],["alert_type","info"],["alert_type","warn"],[1,"ml-auto","mr-auto"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.NdJ("keyup",function(e){return t.onKeyInput(e)}),d.TgZ(1,"h1",1),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"div",2),d.TgZ(5,"mat-form-field",3),d.TgZ(6,"label"),d._UZ(7,"input",4),d.ALo(8,"translate"),d.qZA(),d.TgZ(9,"mat-error"),d._uU(10),d.ALo(11,"translate"),d.qZA(),d.qZA(),d.TgZ(12,"button",5),d.NdJ("click",function(){return t.onSearchByString()}),d.TgZ(13,"mat-icon"),d._uU(14,"search"),d.qZA(),d.qZA(),d.YNc(15,T,2,1,"div",6),d.YNc(16,b,3,3,"app-alert",7),d.YNc(17,N,3,3,"app-alert",8),d.qZA(),d.YNc(18,R,1,0,"mat-spinner",9),d.TgZ(19,"div",10),d.TgZ(20,"button",11),d.NdJ("click",function(){return t.onCancel()}),d._uU(21),d.ALo(22,"translate"),d.qZA(),d.TgZ(23,"button",12),d.NdJ("click",function(){return t.onAdd()}),d._uU(24),d.ALo(25,"translate"),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.Tol(t.theme),d.xp6(2),d.Oqu(d.lcZ(3,15,"DIALOGS.CONNECT_IDENTITY.TITLE_"+t.target)),d.xp6(5),d.s9C("placeholder",d.lcZ(8,17,"DIALOGS.CONNECT_IDENTITY.SEARCH")),d.Q6J("formControl",t.searchCtrl),d.xp6(3),d.hij(" ",d.lcZ(11,19,"DIALOGS.CONNECT_IDENTITY.EMPTY_SEARCH_MESSAGE")," "),d.xp6(2),d.Q6J("disabled",t.loading),d.xp6(3),d.Q6J("ngIf",!t.loading),d.xp6(1),d.Q6J("ngIf",!t.firstSearchDone),d.xp6(1),d.Q6J("ngIf",!t.loading&&t.firstSearchDone&&0===t.identities.length),d.xp6(1),d.Q6J("ngIf",t.loading),d.xp6(3),d.hij(" ",d.lcZ(22,21,"DIALOGS.CONNECT_IDENTITY.CANCEL")," "),d.xp6(2),d.Q6J("disabled",0===t.selection.selected.length),d.xp6(1),d.hij(" ",d.lcZ(25,23,"DIALOGS.CONNECT_IDENTITY.CONNECT")," "))},directives:[s.uh,s.xY,g.KE,m.Nt,p.Fj,p.JJ,p.oH,g.TO,h.lW,I.Hw,v.O5,s.H8,Z.C,A.w,S.$g],pipes:[f.X$],styles:[".search-field[_ngcontent-%COMP%]{width:300px}.search-btn[_ngcontent-%COMP%]{width:50px}"]}),e}()},26019:function(e,t,n){"use strict";n.d(t,{B:function(){return S}});var s=n(65249),a=n(84608),o=n(68416),u=n(67033),l=n(31572),c=n(48160),p=n(61511),d=n(15980),f=n(39571),g=n(22196);function m(e,t){1&e&&l._UZ(0,"th",13)}function h(e,t){if(1&e&&(l.TgZ(0,"td",14),l._uU(1),l.ALo(2,"userFullName"),l.qZA()),2&e){var n=t.$implicit;l.xp6(1),l.hij(" ",l.lcZ(2,1,n)," ")}}function I(e,t){1&e&&l._UZ(0,"tr",15)}function v(e,t){1&e&&l._UZ(0,"tr",16)}function Z(e,t){1&e&&(l.TgZ(0,"app-alert",17),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_DISCONNECT_YOURSELF")," "))}function A(e,t){1&e&&(l.TgZ(0,"app-alert",17),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_LAST_USER")," "))}var S=function(){var e=function(){function e(t,n,s,r,a,o){i(this,e),this.dialogRef=t,this.data=n,this.userManager=s,this.notificator=r,this.translate=a,this.store=o,this.displayedColumns=["name"]}return r(e,[{key:"ngOnInit",value:function(){var e,t=this;this.targetTitle=this.data.targetTitle,this.targetDescription=this.data.targetDescription,this.theme=this.data.theme,this.userId=Number(this.data.userId),this.dataSource=new u.by([this.data.specificUser]),this.isService=this.data.isService,this.isService?(e=this.userId,this.disconnectingSelf=this.dataSource.data[0].id===this.store.getPerunPrincipal().userId):(e=this.dataSource.data[0].id,this.disconnectingSelf=this.userId===this.store.getPerunPrincipal().userId),this.userManager.getUsersBySpecificUser(e).subscribe(function(e){t.disconnectingLastOwner=1===e.length})}},{key:"onConfirm",value:function(){var e,t,n=this;this.isService?(e=this.dataSource.data[0].id,t=this.userId):(e=this.userId,t=this.dataSource.data[0].id),this.userManager.removeSpecificUserOwner(e,t).subscribe(function(){n.notificator.showSuccess(n.translate.instant("DIALOGS.DISCONNECT_IDENTITY.SUCCESS")),n.dialogRef.close(!0)})}},{key:"onCancel",value:function(){this.dialogRef.close(!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(a.so),l.Y36(a.WI),l.Y36(s.Fv),l.Y36(o.V6),l.Y36(c.sK),l.Y36(o.d6))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-disconnect-identity-dialog"]],decls:26,vars:23,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""],["alert_type","warn"]],template:function(e,t){1&e&&(l.TgZ(0,"h1",0),l._uU(1),l.ALo(2,"translate"),l.qZA(),l.TgZ(3,"div"),l.TgZ(4,"div",1),l.TgZ(5,"p"),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.TgZ(8,"div",2),l._uU(9),l.ALo(10,"translate"),l.qZA(),l.TgZ(11,"table",3),l.ynx(12,4),l.YNc(13,m,1,0,"th",5),l.YNc(14,h,3,3,"td",6),l.BQk(),l.YNc(15,I,1,0,"tr",7),l.YNc(16,v,1,0,"tr",8),l.qZA(),l.YNc(17,Z,3,3,"app-alert",9),l.YNc(18,A,3,3,"app-alert",9),l.qZA(),l.TgZ(19,"div",10),l.TgZ(20,"button",11),l.NdJ("click",function(){return t.onCancel()}),l._uU(21),l.ALo(22,"translate"),l.qZA(),l.TgZ(23,"button",12),l.NdJ("click",function(){return t.onConfirm()}),l._uU(24),l.ALo(25,"translate"),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,13,"DIALOGS.DISCONNECT_IDENTITY.TITLE_"+t.targetTitle)),l.xp6(2),l.Tol(t.theme),l.xp6(3),l.Oqu(l.lcZ(7,15,"DIALOGS.DISCONNECT_IDENTITY.DESCRIPTION_"+t.targetDescription)),l.xp6(3),l.hij(" ",l.lcZ(10,17,"DIALOGS.DISCONNECT_IDENTITY.ASK")," "),l.xp6(2),l.Q6J("dataSource",t.dataSource),l.xp6(4),l.Q6J("matHeaderRowDef",t.displayedColumns),l.xp6(1),l.Q6J("matRowDefColumns",t.displayedColumns),l.xp6(1),l.Q6J("ngIf",t.disconnectingSelf),l.xp6(1),l.Q6J("ngIf",t.disconnectingLastOwner),l.xp6(3),l.hij(" ",l.lcZ(22,19,"DIALOGS.DISCONNECT_IDENTITY.CANCEL")," "),l.xp6(3),l.hij(" ",l.lcZ(25,21,"DIALOGS.DISCONNECT_IDENTITY.REMOVE")," "))},directives:[a.uh,a.xY,u.BZ,u.w1,u.fO,u.Dz,u.as,u.nj,p.O5,a.H8,d.lW,u.ge,u.ev,u.XQ,u.Gk,f.w],pipes:[c.X$,g.d],styles:[""]}),e}()},2898:function(e,t,n){"use strict";n.d(t,{x:function(){return A}});var s=n(65249),a=n(84608),o=n(68416),u=n(16073),l=n(31572),c=n(48160),p=n(66283),d=n(80340),f=n(61511),g=n(15980);function m(e,t){1&e&&(l.TgZ(0,"mat-error"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function h(e,t){1&e&&(l.TgZ(0,"mat-error"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function I(e,t){1&e&&(l.TgZ(0,"mat-error"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_FIRST_NAME")))}function v(e,t){1&e&&(l.TgZ(0,"mat-error"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function Z(e,t){1&e&&(l.TgZ(0,"mat-error"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LAST_NAME")))}var A=function(){var e=function(){function e(t,n,s,r,a){i(this,e),this.dialogRef=t,this.data=n,this.userService=s,this.notificator=r,this.translateService=a,this.loading=!1}return r(e,[{key:"ngOnInit",value:function(){this.theme=this.data.theme,this.titleBefore=new u.NI(this.data.user.titleBefore,[u.kI.pattern(".*[\\S]+.*"),u.kI.maxLength(129)]),this.titleAfter=new u.NI(this.data.user.titleAfter,[u.kI.pattern(".*[\\S]+.*"),u.kI.maxLength(129)]),this.firstName=new u.NI(this.data.user.firstName,[u.kI.required,u.kI.pattern(".*[\\S]+.*"),u.kI.maxLength(129)]),this.middleName=new u.NI(this.data.user.middleName,[u.kI.pattern(".*[\\S]+.*"),u.kI.maxLength(129)]),this.lastName=new u.NI(this.data.user.lastName,[u.kI.required,u.kI.pattern(".*[\\S]+.*"),u.kI.maxLength(129)])}},{key:"onCancel",value:function(){this.dialogRef.close(!1)}},{key:"onSave",value:function(){var e=this;this.loading=!0,this.data.user.titleBefore=this.titleBefore.value,this.data.user.titleAfter=this.titleAfter.value,this.data.user.firstName=this.firstName.value,this.data.user.middleName=this.middleName.value,this.data.user.lastName=this.lastName.value,this.userService.updateUser({user:this.data.user}).subscribe(function(){e.translateService.get("DIALOGS.EDIT_USER.SUCCESS").subscribe(function(t){e.notificator.showSuccess(t),e.dialogRef.close(!0)})},function(){return e.loading=!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(a.so),l.Y36(a.WI),l.Y36(s.Fv),l.Y36(o.V6),l.Y36(c.sK))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-edit-user-dialog"]],decls:32,vars:38,consts:[[1,"mat-dialog-title"],["mat-dialog-content","",1,"dialog-container"],["matInput","",3,"formControl","placeholder"],[4,"ngIf"],["matInput","","required","",3,"formControl","placeholder"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"]],template:function(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"h1",0),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"div",1),l.TgZ(5,"mat-form-field"),l._UZ(6,"input",2),l.ALo(7,"translate"),l.YNc(8,m,3,3,"mat-error",3),l.qZA(),l.TgZ(9,"mat-form-field"),l._UZ(10,"input",2),l.ALo(11,"translate"),l.YNc(12,h,3,3,"mat-error",3),l.qZA(),l.TgZ(13,"mat-form-field"),l._UZ(14,"input",4),l.ALo(15,"translate"),l.YNc(16,I,3,3,"mat-error",3),l.qZA(),l.TgZ(17,"mat-form-field"),l._UZ(18,"input",2),l.ALo(19,"translate"),l.YNc(20,v,3,3,"mat-error",3),l.qZA(),l.TgZ(21,"mat-form-field"),l._UZ(22,"input",4),l.ALo(23,"translate"),l.YNc(24,Z,3,3,"mat-error",3),l.qZA(),l.qZA(),l.TgZ(25,"div",5),l.TgZ(26,"button",6),l.NdJ("click",function(){return t.onCancel()}),l._uU(27),l.ALo(28,"translate"),l.qZA(),l.TgZ(29,"button",7),l.NdJ("click",function(){return t.onSave()}),l._uU(30),l.ALo(31,"translate"),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.Tol(t.theme),l.xp6(2),l.Oqu(l.lcZ(3,22,"DIALOGS.EDIT_USER.DIALOG_TITLE")),l.xp6(4),l.s9C("placeholder",l.lcZ(7,24,"DIALOGS.EDIT_USER.TITLE_BEFORE")),l.Q6J("formControl",t.titleBefore),l.xp6(2),l.Q6J("ngIf",t.titleBefore.invalid),l.xp6(2),l.s9C("placeholder",l.lcZ(11,26,"DIALOGS.EDIT_USER.TITLE_AFTER")),l.Q6J("formControl",t.titleAfter),l.xp6(2),l.Q6J("ngIf",t.titleAfter.invalid),l.xp6(2),l.s9C("placeholder",l.lcZ(15,28,"DIALOGS.EDIT_USER.FIRST_NAME")),l.Q6J("formControl",t.firstName),l.xp6(2),l.Q6J("ngIf",t.firstName.invalid),l.xp6(2),l.s9C("placeholder",l.lcZ(19,30,"DIALOGS.EDIT_USER.MIDDLE_NAME")),l.Q6J("formControl",t.middleName),l.xp6(2),l.Q6J("ngIf",t.middleName.invalid),l.xp6(2),l.s9C("placeholder",l.lcZ(23,32,"DIALOGS.EDIT_USER.LAST_NAME")),l.Q6J("formControl",t.lastName),l.xp6(2),l.Q6J("ngIf",t.lastName.invalid),l.xp6(3),l.hij(" ",l.lcZ(28,34,"DIALOGS.EDIT_USER.CANCEL")," "),l.xp6(2),l.Q6J("disabled",t.loading||t.firstName.invalid||t.lastName.invalid||t.titleBefore.invalid||t.titleAfter.invalid||t.middleName.invalid),l.xp6(1),l.hij(" ",l.lcZ(31,36,"DIALOGS.EDIT_USER.SAVE")," "))},directives:[a.xY,p.KE,d.Nt,u.Fj,u.JJ,u.oH,f.O5,u.Q7,a.H8,g.lW,p.TO],pipes:[c.X$],styles:[""]}),e}()},95690:function(e,t,n){"use strict";n.d(t,{u:function(){return v}});var s=n(68416),a=n(31572),o=n(57629),u=n(55109),l=n(61511),c=n(541),p=n(3417),d=n(48160);function f(e,t){1&e&&(a._uU(0),a.ALo(1,"translate")),2&e&&a.hij(" ",a.lcZ(1,1,"ADMIN_USER.ENTITY")," ")}function g(e,t){if(1&e&&a._UZ(0,"app-one-entity-attribute-page",5),2&e){var n=a.oxw();a.Q6J("entityId",n.userId)("entity","user")}}function m(e,t){1&e&&(a._uU(0),a.ALo(1,"translate"),a.ALo(2,"translate")),2&e&&a.AsE(" ",a.lcZ(1,2,"ADMIN_USER.ENTITY")," - ",a.lcZ(2,4,"FACILITY_DETAIL.ENTITY")," ")}function h(e,t){if(1&e&&a._UZ(0,"app-two-entity-attribute-page",6),2&e){var n=a.oxw(2);a.Q6J("firstEntity","user")("firstEntityId",n.userId)("secondEntity","facility")}}function I(e,t){1&e&&(a.TgZ(0,"mat-tab"),a.YNc(1,m,3,6,"ng-template",2),a.YNc(2,h,1,3,"ng-template",3),a.qZA())}var v=function(){var e=function(){function e(t,n,s){i(this,e),this.route=t,this.store=n,this.authResolver=s}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.params.subscribe(function(t){e.userId=t.userId,void 0===e.userId&&(e.userId=e.store.getPerunPrincipal().userId),e.userFacilityAttAuth=e.authResolver.isAuthorized("getAssignedFacilities_User_policy",[{id:e.userId,beanName:"User"}])})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(o.gz),a.Y36(s.d6),a.Y36(s.x4))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-user-settings-attributes"]],hostVars:2,hostBindings:function(e,t){2&e&&a.ekj("router-component",t.true)},decls:8,vars:4,consts:[[1,"page-subtitle"],[1,"mb-2"],["matTabLabel",""],["matTabContent",""],[4,"ngIf"],[3,"entityId","entity"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(e,t){1&e&&(a.TgZ(0,"h1",0),a._uU(1),a.ALo(2,"translate"),a.qZA(),a.TgZ(3,"mat-tab-group"),a.TgZ(4,"mat-tab",1),a.YNc(5,f,2,3,"ng-template",2),a.YNc(6,g,1,2,"ng-template",3),a.qZA(),a.YNc(7,I,3,0,"mat-tab",4),a.qZA()),2&e&&(a.xp6(1),a.Oqu(a.lcZ(2,2,"USER_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),a.xp6(6),a.Q6J("ngIf",t.userFacilityAttAuth))},directives:[u.SP,u.uX,u.uD,u.Vc,l.O5,c.t,p.Y],pipes:[d.X$],styles:[""]}),e}()},31612:function(e,n,s){"use strict";s.d(n,{u:function(){return R}});var a=s(68416),o=s(65249),u=s(60611),l=s(31572),c=s(57629),p=s(61511),d=s(59403),f=s(19139),g=s(67806),m=s(78364),h=s(48160);function I(e,t){1&e&&(l.TgZ(0,"h1",6),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.YOU_ARE_MEMBER"),"\n"))}function v(e,t){1&e&&(l.TgZ(0,"h1",6),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_MEMBER"),"\n"))}function Z(e,t){1&e&&l._UZ(0,"mat-spinner",7)}var A=function(){return["id","vo","name","description","status"]};function S(e,t){if(1&e&&l._UZ(0,"perun-web-apps-groups-list",8),2&e){var n=l.oxw();l.Q6J("tableId",n.tableId)("groups",n.membersGroups)("displayedColumns",l.DdM(5,A))("disableMembers",!1)("filter",n.memberFilterValue)}}function E(e,t){1&e&&l._UZ(0,"mat-spinner",7)}var T=function(){return["id","vo","name","description"]};function b(e,t){if(1&e&&l._UZ(0,"perun-web-apps-groups-list",8),2&e){var n=l.oxw(2);l.Q6J("tableId",n.adminTableId)("groups",n.adminsGroups)("displayedColumns",l.DdM(5,T))("disableMembers",!1)("filter",n.adminFilterValue)}}function N(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"div",9),l.TgZ(1,"h1",6),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"perun-web-apps-refresh-button",1),l.NdJ("refresh",function(){return l.CHM(n),l.oxw().refreshAdminTable()}),l.qZA(),l.TgZ(5,"perun-web-apps-immediate-filter",2),l.NdJ("filter",function(e){return l.CHM(n),l.oxw().adminFilter(e)}),l.qZA(),l.YNc(6,E,1,0,"mat-spinner",3),l.YNc(7,b,1,6,"perun-web-apps-groups-list",4),l.qZA()}if(2&e){var i=l.oxw();l.xp6(2),l.hij(" ",l.lcZ(3,4,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_ADMIN")," "),l.xp6(3),l.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),l.xp6(1),l.Q6J("ngIf",i.adminRefresh),l.xp6(1),l.Q6J("ngIf",!i.adminRefresh)}}var R=function(){var e=function(){function e(t,n,s,r,a){i(this,e),this.usersService=t,this.memberService=n,this.groupService=s,this.store=r,this.route=a,this.memberFilterValue="",this.adminFilterValue="",this.vos=[],this.membersGroups=[],this.adminsGroups=[],this.tableId=u.KE,this.adminTableId=u.Sb}return r(e,[{key:"ngOnInit",value:function(){var e=this;!0===(this.showPrincipal=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(function(t){return e.userId=t.userId}),this.refreshAdminTable(),this.refreshMemberTable()}},{key:"memberFilter",value:function(e){this.memberFilterValue=e}},{key:"adminFilter",value:function(e){this.adminFilterValue=e}},{key:"refreshAdminTable",value:function(){var e=this;this.adminRefresh=!0,this.usersService.getGroupsWhereUserIsAdmin(this.userId).subscribe(function(t){e.adminsGroups=t,e.adminRefresh=!1})}},{key:"refreshMemberTable",value:function(){var e=this;this.memberRefresh=!0,this.membersGroups=[],this.usersService.getVosWhereUserIsMember(this.userId).subscribe(function(n){e.vos=n;var i,s=function(e,n){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=t(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var s=0,r=function(){};return{s:r,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(u)throw a}}}}(e.vos);try{var r=function(){var t=i.value;e.memberService.getMemberByUser(t.id,e.userId).subscribe(function(n){e.groupService.getMemberGroups(n.id).subscribe(function(n){e.membersGroups=e.membersGroups.concat(n),e.vos.indexOf(t)===e.vos.length-1&&(e.memberRefresh=!1)})})};for(s.s();!(i=s.n()).done;)r()}catch(a){s.e(a)}finally{s.f()}0===n.length&&(e.memberRefresh=!1)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(o.Fv),l.Y36(o.uq),l.Y36(o.ff),l.Y36(a.d6),l.Y36(c.gz))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-user-groups"]],hostVars:2,hostBindings:function(e,t){2&e&&l.ekj("router-component",t.true)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","groups","displayedColumns","disableMembers","filter",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"ml-auto","mr-auto"],[3,"tableId","groups","displayedColumns","disableMembers","filter"],[1,"mt-5"]],template:function(e,t){1&e&&(l.YNc(0,I,3,3,"h1",0),l.YNc(1,v,3,3,"h1",0),l.TgZ(2,"perun-web-apps-refresh-button",1),l.NdJ("refresh",function(){return t.refreshMemberTable()}),l.qZA(),l.TgZ(3,"perun-web-apps-immediate-filter",2),l.NdJ("filter",function(e){return t.memberFilter(e)}),l.qZA(),l.YNc(4,Z,1,0,"mat-spinner",3),l.YNc(5,S,1,6,"perun-web-apps-groups-list",4),l.YNc(6,N,8,6,"div",5)),2&e&&(l.Q6J("ngIf",t.showPrincipal),l.xp6(1),l.Q6J("ngIf",!t.showPrincipal),l.xp6(2),l.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),l.xp6(1),l.Q6J("ngIf",t.memberRefresh),l.xp6(1),l.Q6J("ngIf",!t.memberRefresh),l.xp6(1),l.Q6J("ngIf",!t.showPrincipal))},directives:[p.O5,d.t,f.L,g.$g,m.W],pipes:[h.X$],styles:[""]}),e}()},15879:function(e,t,n){"use strict";n.d(t,{j:function(){return T}});var s=n(65249),a=n(68416),o=n(60611),u=n(31572),l=n(57629),c=n(61511),p=n(59403),d=n(19139),f=n(67806),g=n(97162),m=n(48160);function h(e,t){1&e&&(u.TgZ(0,"h1",6),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.YOU_ARE_MEMBER"),"\n"))}function I(e,t){1&e&&(u.TgZ(0,"h1",6),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_MEMBER"),"\n"))}function v(e,t){1&e&&u._UZ(0,"mat-spinner",7)}function Z(e,t){if(1&e&&u._UZ(0,"perun-web-apps-vos-list",8),2&e){var n=u.oxw();u.Q6J("displayedColumns",n.displayedColumns)("tableId",n.memberTableId)("filterValue",n.memberFilterValue)("vos",n.vosWhereIsMember)}}function A(e,t){1&e&&u._UZ(0,"mat-spinner",7)}function S(e,t){if(1&e&&u._UZ(0,"perun-web-apps-vos-list",8),2&e){var n=u.oxw(2);u.Q6J("displayedColumns",n.displayedColumns)("tableId",n.adminTableId)("filterValue",n.adminFilterValue)("vos",n.vosWhereIsAdmin)}}function E(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",9),u.TgZ(1,"h1",6),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"perun-web-apps-refresh-button",1),u.NdJ("refresh",function(){return u.CHM(n),u.oxw().refreshAdminTable()}),u.qZA(),u.TgZ(5,"perun-web-apps-immediate-filter",2),u.NdJ("filter",function(e){return u.CHM(n),u.oxw().applyAdminFilter(e)}),u.qZA(),u.YNc(6,A,1,0,"mat-spinner",3),u.YNc(7,S,1,4,"perun-web-apps-vos-list",4),u.qZA()}if(2&e){var i=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,4,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_ADMIN")),u.xp6(3),u.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),u.xp6(1),u.Q6J("ngIf",i.adminRefresh),u.xp6(1),u.Q6J("ngIf",!i.adminRefresh)}}var T=function(){var e=function(){function e(t,n,s,r){i(this,e),this.usersService=t,this.authResolver=n,this.store=s,this.route=r,this.adminFilterValue="",this.memberFilterValue="",this.displayedColumns=["id","name"],this.adminTableId=o.YF,this.memberTableId=o.gc}return r(e,[{key:"ngOnInit",value:function(){var e=this;!0===(this.isMyProfile=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(function(t){return e.userId=t.userId}),this.refreshAdminTable(),this.refreshMemberTable()}},{key:"refreshMemberTable",value:function(){var e=this;this.memberRefresh=!0,this.usersService.getVosWhereUserIsMember(this.userId).subscribe(function(t){e.vosWhereIsMember=t,e.memberRefresh=!1},function(){return e.memberRefresh=!1})}},{key:"refreshAdminTable",value:function(){var e=this;this.adminRefresh=!0,this.usersService.getVosWhereUserIsAdmin(this.userId).subscribe(function(t){e.vosWhereIsAdmin=t,e.adminRefresh=!1},function(){return e.adminRefresh=!1})}},{key:"applyMemberFilter",value:function(e){this.memberFilterValue=e}},{key:"applyAdminFilter",value:function(e){this.adminFilterValue=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(s.Fv),u.Y36(a.x4),u.Y36(a.d6),u.Y36(l.gz))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-user-organizations"]],hostVars:2,hostBindings:function(e,t){2&e&&u.ekj("router-component",t.true)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","mr-auto ml-auto",4,"ngIf"],[3,"displayedColumns","tableId","filterValue","vos",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"mr-auto","ml-auto"],[3,"displayedColumns","tableId","filterValue","vos"],[1,"mt-5"]],template:function(e,t){1&e&&(u.YNc(0,h,3,3,"h1",0),u.YNc(1,I,3,3,"h1",0),u.TgZ(2,"perun-web-apps-refresh-button",1),u.NdJ("refresh",function(){return t.refreshMemberTable()}),u.qZA(),u.TgZ(3,"perun-web-apps-immediate-filter",2),u.NdJ("filter",function(e){return t.applyMemberFilter(e)}),u.qZA(),u.YNc(4,v,1,0,"mat-spinner",3),u.YNc(5,Z,1,4,"perun-web-apps-vos-list",4),u.YNc(6,E,8,6,"div",5)),2&e&&(u.Q6J("ngIf",t.isMyProfile),u.xp6(1),u.Q6J("ngIf",!t.isMyProfile),u.xp6(2),u.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),u.xp6(1),u.Q6J("ngIf",t.memberRefresh),u.xp6(1),u.Q6J("ngIf",!t.memberRefresh),u.xp6(1),u.Q6J("ngIf",!t.isMyProfile))},directives:[c.O5,p.t,d.L,f.$g,g.Z],pipes:[m.X$],styles:[""]}),e}()},71956:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var s=n(65249),a=n(67033),o=n(68416),u=n(67004),l=n(84140),c=n(6527),p=n(31572),d=n(57629),f=n(84608),g=n(61511),m=n(8557),h=n(27439),I=n(15980),v=n(43691),Z=n(48160);function A(e,t){1&e&&p._UZ(0,"th",12)}function S(e,t){if(1&e&&(p.TgZ(0,"td",13),p._uU(1),p.qZA()),2&e){var n=t.$implicit;p.xp6(1),p.hij(" ",n.displayName,": ")}}function E(e,t){1&e&&p._UZ(0,"th",12)}function T(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"td",14),p._uU(1),p.TgZ(2,"button",15),p.NdJ("click",function(){return p.CHM(n),p.oxw(2).changeEmail()}),p.TgZ(3,"mat-icon"),p._uU(4,"edit"),p.qZA(),p.qZA(),p.qZA()}if(2&e){var i=t.$implicit;p.xp6(1),p.hij(" ",i.value," ")}}function b(e,t){1&e&&p._UZ(0,"tr",16)}function N(e,t){if(1&e&&(p.TgZ(0,"div",2),p.TgZ(1,"mat-card",3),p.TgZ(2,"mat-card-header"),p.TgZ(3,"mat-card-title"),p.TgZ(4,"h1",4),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(7,"mat-card-content"),p.TgZ(8,"table",5),p.ynx(9,6),p.YNc(10,A,1,0,"th",7),p.YNc(11,S,2,1,"td",8),p.BQk(),p.ynx(12,9),p.YNc(13,E,1,0,"th",7),p.YNc(14,T,5,1,"td",10),p.BQk(),p.YNc(15,b,1,0,"tr",11),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e){var n=p.oxw();p.xp6(5),p.Oqu(p.lcZ(6,3,"USER_DETAIL.OVERVIEW.GENERAL_SETTINGS")),p.xp6(3),p.Q6J("dataSource",n.mailDataSource),p.xp6(7),p.Q6J("matRowDefColumns",n.displayedColumns)}}var R=function(){var e=function(){function e(t,n,s,r,a){i(this,e),this.userService=t,this.attributeService=n,this.storeService=s,this.route=r,this.dialog=a,this.navItems=[],this.isServiceUser=!1,this.displayedColumns=["name","value"],this.inMyProfile=!1}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe(function(t){void 0!==t.userId?e.userService.getUserById(t.userId).subscribe(function(t){e.user=t,e.isServiceUser=t.serviceUser,e.initNavItems()}):(e.inMyProfile=!0,e.userID=e.storeService.getPerunPrincipal().user.id,e.attributeService.getUserAttributeByName(e.userID,u.r.USER_DEF_PREFERRED_MAIL).subscribe(function(t){e.preferredMail=t,e.handleMailNotDefined(),e.mailDataSource=new a.by([e.preferredMail]),e.initNavItems()}))})}},{key:"initNavItems",value:function(){this.navItems=[{cssIcon:"perun-vo",url:"organizations",label:"MENU_ITEMS.ADMIN.ORGANIZATIONS",style:"user-btn"},{cssIcon:"perun-group",url:"groups",label:"MENU_ITEMS.ADMIN.GROUPS",style:"user-btn"}],window.location.pathname.startsWith("/admin")&&this.navItems.push({cssIcon:"perun-user",url:"accounts",label:"MENU_ITEMS.USER.ACCOUNTS",style:"user-btn"},{cssIcon:"perun-group",url:"identities",label:"MENU_ITEMS.USER.IDENTITIES",style:"user-btn"},{cssIcon:"perun-facility-white",url:"facilities",label:"MENU_ITEMS.USER.FACILITIES",style:"user-btn"},{cssIcon:"perun-resource",url:"resources",label:"MENU_ITEMS.USER.RESOURCES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-attributes",url:"attributes",label:"MENU_ITEMS.USER.ATTRIBUTES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-group",url:"roles",label:"MENU_ITEMS.USER.ROLES",style:"user-btn"}),this.navItems.push(this.isServiceUser?{cssIcon:"perun-user-dark",url:"associated-users",label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"}:{cssIcon:"perun-service-identity",url:"service-identities",label:"MENU_ITEMS.USER.SERVICE_IDENTITIES",style:"user-btn"}),window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:"settings",label:"MENU_ITEMS.ADMIN.SETTINGS",style:"user-btn"})}},{key:"changeEmail",value:function(){var e=this,t=(0,l.kZ)();t.width="350px",t.data={userId:this.userID},this.dialog.open(c.gr,t).afterClosed().subscribe(function(t){t&&e.attributeService.getUserAttributeByName(e.userID,u.r.USER_DEF_PREFERRED_MAIL).subscribe(function(t){e.preferredMail=t,e.handleMailNotDefined(),e.mailDataSource=new a.by([e.preferredMail])})})}},{key:"handleMailNotDefined",value:function(){null==this.preferredMail&&(this.preferredMail={id:-1,beanName:"Attribute",displayName:(0,l.Cz)(u.r.USER_DEF_PREFERRED_MAIL.split(":").pop()),value:Object("-")})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Y36(s.Fv),p.Y36(s.H8),p.Y36(o.d6),p.Y36(d.gz),p.Y36(f.uw))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-user-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&p.ekj("router-component",t.true)},decls:2,vars:3,consts:[["class","align-cards",4,"ngIf"],[3,"items","size"],[1,"align-cards"],[1,"mat-elevation-z3"],[1,"page-subtitle"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","font-weight-bold","mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"font-weight-bold"],["mat-cell",""],["mat-icon-button","",1,"ml-3",3,"click"],["mat-row",""]],template:function(e,t){1&e&&(p.YNc(0,N,16,5,"div",0),p._UZ(1,"perun-web-apps-menu-buttons-field",1)),2&e&&(p.Q6J("ngIf",t.inMyProfile),p.xp6(1),p.Q6J("items",t.navItems)("size","small"))},directives:[g.O5,m.L,h.a8,h.dk,h.n5,h.dn,a.BZ,a.w1,a.fO,a.Dz,a.nj,a.ge,a.ev,I.lW,v.Hw,a.Gk],pipes:[Z.X$],styles:[".align-cards[_ngcontent-%COMP%]{margin:1rem;display:inline-block;vertical-align:top}"]}),e}()},7233:function(t,n,s){"use strict";s.d(n,{t:function(){return Qe}});var a=s(65249),o=s(68416),u=s(31572),l=s(57629),c=s(61511),p=s(67806),d=s(45001),f=s(43691),g=s(27439),m=s(97162),h=s(77889),I=s(78364),v=s(88884),Z=s(60007),A=s(4252),S=s(48160);function E(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function T(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function b(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.SELF_VOS_ADMIN")," "))}function N(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.SELF_VOS")," "))}function R(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.SELF_IDENTITIES_ADMIN")," "))}function U(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.SELF_IDENTITIES")," "))}var x=function(){return["user","id","name"]};function _(e,t){if(1&e&&(u.TgZ(0,"div",11),u.YNc(1,R,3,3,"div",2),u.YNc(2,U,3,3,"div",2),u._UZ(3,"app-users-list",12),u.qZA()),2&e){var n=u.oxw(4);u.xp6(1),u.Q6J("ngIf",!n.showDescription),u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("users",n.users)("disableRouting",!0)("displayedColumns",u.DdM(5,x))}}var O=function(){return["id","name","shortName"]};function y(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,b,3,3,"div",2),u.YNc(2,N,3,3,"div",2),u._UZ(3,"perun-web-apps-vos-list",9),u.YNc(4,_,4,6,"div",10),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",!n.showDescription),u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("displayedColumns",u.DdM(5,O))("vos",n.vos),u.xp6(1),u.Q6J("ngIf",n.users.length)}}function C(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){return u.CHM(n),u.oxw(2).getSelfData()}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",7),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,T,1,0,"mat-spinner",1),u.YNc(8,y,5,6,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.SELF")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function L(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function w(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.GROUPADMIN_GROUPS")," "))}var D=function(){return["id","vo","name","description"]};function q(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,w,3,3,"div",2),u._UZ(2,"perun-web-apps-groups-list",14),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("groups",n.groups)("displayedColumns",u.DdM(3,D))}}function Y(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){return u.CHM(n),u.oxw(2).getAdminGroupsAndVos()}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",13),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,L,1,0,"mat-spinner",1),u.YNc(8,q,3,4,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.GROUPADMIN")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function M(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function J(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.GROUPOBSERVER_GROUPS")," "))}var k=function(){return["id","recent","vo","name","description"]};function Q(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,J,3,3,"div",2),u._UZ(2,"perun-web-apps-groups-list",14),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("groups",n.groups)("displayedColumns",u.DdM(3,k))}}function F(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){return u.CHM(n),u.oxw(2).getGroupsAndVos("GROUPOBSERVER")}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",13),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,M,1,0,"mat-spinner",1),u.YNc(8,Q,3,4,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.GROUPOBSERVER")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function P(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function V(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.VOADMIN_VOS")," "))}function G(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,V,3,3,"div",2),u._UZ(2,"perun-web-apps-vos-list",9),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("displayedColumns",u.DdM(3,O))("vos",n.vos)}}function B(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){return u.CHM(n),u.oxw(2).getAdminVos()}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",15),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,P,1,0,"mat-spinner",1),u.YNc(8,G,3,4,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.VOADMIN")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function j(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function H(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.VOOBSERVER_VOS")," "))}function z(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,H,3,3,"div",2),u._UZ(2,"perun-web-apps-vos-list",9),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("displayedColumns",u.DdM(3,O))("vos",n.vos)}}function W(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){u.CHM(n);var e=u.oxw(2);return e.getVos(e.roles.get("VOOBSERVER").get("Vo"))}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",15),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,j,1,0,"mat-spinner",1),u.YNc(8,z,3,4,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.VOOBSERVER")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function X(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function $(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.TRUSTEDFACILITYADMIN_VOS")," "))}function K(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"div"),u.YNc(2,$,3,3,"div",2),u._UZ(3,"perun-web-apps-vos-list",9),u.qZA(),u.qZA()),2&e){var n=u.oxw(3);u.xp6(2),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("displayedColumns",u.DdM(3,O))("vos",n.vos)}}function ee(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){u.CHM(n);var e=u.oxw(2);return e.getVos(e.roles.get("TRUSTEDFACILITYADMIN").get("Vo"))}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",15),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,X,1,0,"mat-spinner",1),u.YNc(8,K,4,4,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.TRUSTEDFACILITYADMIN")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function te(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function ne(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.TOPGROUPCREATOR_VOS")," "))}function ie(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,ne,3,3,"div",2),u._UZ(2,"perun-web-apps-vos-list",9),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("displayedColumns",u.DdM(3,O))("vos",n.vos)}}function se(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){u.CHM(n);var e=u.oxw(2);return e.getVos(e.roles.get("TOPGROUPCREATOR").get("Vo"))}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",15),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,te,1,0,"mat-spinner",1),u.YNc(8,ie,3,4,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.TOPGROUPCREATOR")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function re(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function ae(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.RESOURCEADMIN_RESOURCES")," "))}var oe=function(){return["id","name","vo","facility","description"]};function ue(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,ae,3,3,"div",2),u._UZ(2,"perun-web-apps-resources-list",17),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("resources",n.resources)("routingVo",!0)("displayedColumns",u.DdM(4,oe))}}function le(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){return u.CHM(n),u.oxw(2).getResourcesData("RESOURCEADMIN")}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",16),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,re,1,0,"mat-spinner",1),u.YNc(8,ue,3,5,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.RESOURCEADMIN")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function ce(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function pe(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.RESOURCEOBSERVER_RESOURCES")," "))}function de(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,pe,3,3,"div",2),u._UZ(2,"perun-web-apps-resources-list",17),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("resources",n.resources)("routingVo",!0)("displayedColumns",u.DdM(4,oe))}}function fe(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){return u.CHM(n),u.oxw(2).getResourcesData("RESOURCEOBSERVER")}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",16),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,ce,1,0,"mat-spinner",1),u.YNc(8,de,3,5,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.RESOURCEOBSERVER")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function ge(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function me(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.RESOURCESELFSERVICE_RESOURCES")," "))}function he(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,me,3,3,"div",2),u._UZ(2,"perun-web-apps-resources-list",17),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("resources",n.resources)("routingVo",!0)("displayedColumns",u.DdM(4,oe))}}function Ie(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){return u.CHM(n),u.oxw(2).getResourcesData("RESOURCESELFSERVICE")}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",16),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,ge,1,0,"mat-spinner",1),u.YNc(8,he,3,5,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.RESOURCESELFSERVICE")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function ve(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function Ze(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.FACILITYADMIN_FACILITIES")," "))}var Ae=function(){return["id","name","description"]};function Se(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,Ze,3,3,"div",2),u._UZ(2,"perun-web-apps-facilities-list",19),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("displayedColumns",u.DdM(3,Ae))("facilities",n.facilities)}}function Ee(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){return u.CHM(n),u.oxw(2).getAdminFacilities()}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",18),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,ve,1,0,"mat-spinner",1),u.YNc(8,Se,3,4,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.FACILITYADMIN")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function Te(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function be(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.FACILITYOBSERVER_FACILITIES")," "))}function Ne(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,be,3,3,"div",2),u._UZ(2,"perun-web-apps-facilities-list",19),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("displayedColumns",u.DdM(3,Ae))("facilities",n.facilities)}}function Re(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){return u.CHM(n),u.oxw(2).getFacilities("FACILITYOBSERVER")}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",18),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,Te,1,0,"mat-spinner",1),u.YNc(8,Ne,3,4,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.FACILITYOBSERVER")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function Ue(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function xe(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.SPONSORSHIP_MEMBERS")," "))}var _e=function(){return["id","fullName","sponsored"]};function Oe(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,xe,3,3,"div",2),u._UZ(2,"perun-web-apps-members-list",20),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("members",n.members)("displayedColumns",u.DdM(3,_e))}}function ye(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){return u.CHM(n),u.oxw(2).getMembers()}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",7),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,Ue,1,0,"mat-spinner",1),u.YNc(8,Oe,3,4,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.SPONSORSHIP")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function Ce(e,t){1&e&&u._UZ(0,"mat-spinner",3)}function Le(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"ROLES.SPONSOR_VOS")," "))}function we(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,Le,3,3,"div",2),u._UZ(2,"perun-web-apps-vos-list",9),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("ngIf",n.showDescription),u.xp6(1),u.Q6J("displayedColumns",u.DdM(3,O))("vos",n.vos)}}function De(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){u.CHM(n);var e=u.oxw(2);return e.getVos(e.roles.get("SPONSOR").get("Vo"))}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",7),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,Ce,1,0,"mat-spinner",1),u.YNc(8,we,3,4,"div",2),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(5),u.Oqu(u.lcZ(6,3,"ROLES.SPONSOR")),u.xp6(2),u.Q6J("ngIf",i.loading),u.xp6(1),u.Q6J("ngIf",!i.loading)}}function qe(e,t){1&e&&(u.TgZ(0,"mat-expansion-panel"),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",7),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(5),u.Oqu(u.lcZ(6,1,"ROLES.PERUN_ADMIN")))}function Ye(e,t){1&e&&(u.TgZ(0,"mat-expansion-panel"),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",7),u.TgZ(4,"p",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(5),u.Oqu(u.lcZ(6,1,"ROLES.PERUN_OBSERVER")))}function Me(e,t){if(1&e&&(u.TgZ(0,"p",22),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.xp6(1),u.AsE("",n[0]," ids: ",n[1],"")}}function Je(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"mat-expansion-panel",6),u.NdJ("opened",function(){var e=u.CHM(n).$implicit;return u.oxw(2).getInnerKeys(e)}),u.TgZ(1,"mat-expansion-panel-header"),u.TgZ(2,"mat-panel-title"),u._UZ(3,"mat-icon",7),u.TgZ(4,"p",8),u._uU(5),u.qZA(),u.qZA(),u.qZA(),u.YNc(6,Me,2,2,"p",21),u.qZA()}if(2&e){var i=t.$implicit,s=u.oxw(2);u.xp6(5),u.Oqu(i),u.xp6(1),u.Q6J("ngForOf",s.currentIds)}}function ke(e,t){if(1&e&&(u.TgZ(0,"mat-accordion"),u.YNc(1,C,9,5,"mat-expansion-panel",4),u.YNc(2,Y,9,5,"mat-expansion-panel",4),u.YNc(3,F,9,5,"mat-expansion-panel",4),u.YNc(4,B,9,5,"mat-expansion-panel",4),u.YNc(5,W,9,5,"mat-expansion-panel",4),u.YNc(6,ee,9,5,"mat-expansion-panel",4),u.YNc(7,se,9,5,"mat-expansion-panel",4),u.YNc(8,le,9,5,"mat-expansion-panel",4),u.YNc(9,fe,9,5,"mat-expansion-panel",4),u.YNc(10,Ie,9,5,"mat-expansion-panel",4),u.YNc(11,Ee,9,5,"mat-expansion-panel",4),u.YNc(12,Re,9,5,"mat-expansion-panel",4),u.YNc(13,ye,9,5,"mat-expansion-panel",4),u.YNc(14,De,9,5,"mat-expansion-panel",4),u.YNc(15,qe,7,3,"mat-expansion-panel",2),u.YNc(16,Ye,7,3,"mat-expansion-panel",2),u.YNc(17,Je,7,2,"mat-expansion-panel",5),u.qZA()),2&e){var n=u.oxw();u.xp6(1),u.Q6J("ngIf",n.isSelf),u.xp6(1),u.Q6J("ngIf",n.isGroupAdmin),u.xp6(1),u.Q6J("ngIf",n.isGroupObserver),u.xp6(1),u.Q6J("ngIf",n.isVoAdmin),u.xp6(1),u.Q6J("ngIf",n.isVoObserver),u.xp6(1),u.Q6J("ngIf",n.isTrustedFacilityAdmin),u.xp6(1),u.Q6J("ngIf",n.isTopGroupCreator),u.xp6(1),u.Q6J("ngIf",n.isResourceAdmin),u.xp6(1),u.Q6J("ngIf",n.isResourceObserver),u.xp6(1),u.Q6J("ngIf",n.isResourceSelfService),u.xp6(1),u.Q6J("ngIf",n.isFacilityAdmin),u.xp6(1),u.Q6J("ngIf",n.isFacilityObserver),u.xp6(1),u.Q6J("ngIf",n.hasSponsorship),u.xp6(1),u.Q6J("ngIf",n.isSponsor),u.xp6(1),u.Q6J("ngIf",n.isPerunAdmin),u.xp6(1),u.Q6J("ngIf",n.isPerunObserver),u.xp6(1),u.Q6J("ngForOf",n.roleNames)}}var Qe=function(){var t=function(){function t(e,n,s,r,a,o,u,l,c){i(this,t),this.authzResolverService=e,this.usersManagerService=n,this.vosManagerService=s,this.facilitiesManagerService=r,this.resourcesManagerService=a,this.membersManagerService=o,this.groupsManagerService=u,this.route=l,this.store=c,this.currentIds=[],this.roles=new Map,this.roleFilter=["SELF","GROUPADMIN","VOADMIN","RESOURCEADMIN","FACILITYADMIN","TOPGROUPCREATOR","SPONSORSHIP","SPONSOR","RESOURCESELFSERVICE","VOOBSERVER","RESOURCEOBSERVER","GROUPOBSERVER","TRUSTEDFACILITYADMIN","FACILITYOBSERVER","PERUNADMIN","PERUNOBSERVER"],this.roleNames=[],this.groups=[],this.vos=[],this.facilities=[],this.users=[],this.resources=[],this.members=[]}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.outerLoading=!0,this.route.parent.params.subscribe(function(t){t.userId?(e.userId=t.userId,e.authzResolverService.getUserRoleNames(e.userId).subscribe(function(t){e.roleNames=t.map(function(e){return e.toUpperCase()}),e.authzResolverService.getUserRoles(e.userId).subscribe(function(t){e.prepareRoles(t)})})):(e.showDescription=!0,e.principal=e.store.getPerunPrincipal(),e.userId=e.principal.userId,e.roleNames=Object.keys(e.principal.roles),e.prepareRoles(e.principal.roles))})}},{key:"prepareRoles",value:function(e){var t=this;this.roleNames.forEach(function(n){var i=new Map;switch(Object.keys(e[n]).forEach(function(t){i.set(t,e[n][t])}),n){case"SELF":t.isSelf=!0;break;case"GROUPADMIN":t.isGroupAdmin=!0;break;case"VOADMIN":t.isVoAdmin=!0;break;case"RESOURCEADMIN":t.isResourceAdmin=!0;break;case"FACILITYADMIN":t.isFacilityAdmin=!0;break;case"TOPGROUPCREATOR":t.isTopGroupCreator=!0;break;case"SPONSORSHIP":t.hasSponsorship=!0;break;case"SPONSOR":t.isSponsor=!0;break;case"RESOURCESELFSERVICE":t.isResourceSelfService=!0;break;case"VOOBSERVER":t.isVoObserver=!0;break;case"RESOURCEOBSERVER":t.isResourceObserver=!0;break;case"GROUPOBSERVER":t.isGroupObserver=!0;break;case"TRUSTEDFACILITYADMIN":t.isTrustedFacilityAdmin=!0;break;case"FACILITYOBSERVER":t.isFacilityObserver=!0;break;case"PERUNADMIN":t.isPerunAdmin=!0;break;case"PERUNOBSERVER":t.isPerunObserver=!0}t.roles.set(n,i)}),this.roleNames=this.roleNames.filter(function(e){return!t.roleFilter.includes(e)}),this.outerLoading=!1}},{key:"getAdminGroupsAndVos",value:function(){var t=this;this.loading=!0,this.groups=[],this.usersManagerService.getGroupsWhereUserIsAdmin(this.userId).subscribe(function(n){t.groups=n;var i=e(new Set(t.groups.map(function(e){return e.voId})));t.getVos(i)})}},{key:"getVos",value:function(e){var t=this;this.loading=!0,this.vos=[],this.vosManagerService.getVosByIds(e).subscribe(function(e){t.vos=e,t.loading=!1})}},{key:"getInnerKeys",value:function(e){if(this.roles.get(e)){for(var t=this.roles.get(e).entries(),n=[],i=t.next().value;i;)n.push(i),i=t.next().value;this.currentIds=n}else this.currentIds=[]}},{key:"getAdminVos",value:function(){var e=this;this.loading=!0,this.vos=[],this.usersManagerService.getVosWhereUserIsAdmin(this.userId).subscribe(function(t){e.vos=t,e.loading=!1})}},{key:"getAdminFacilities",value:function(){var e=this;this.loading=!0,this.facilities=[],this.facilitiesManagerService.getFacilitiesWhereUserIsAdmin(this.userId).subscribe(function(t){e.facilities=t.map(function(e){return{facility:e}}),e.loading=!1})}},{key:"getSelfData",value:function(){var e=this;this.loading=!0,this.vos=[],this.users=[],this.usersManagerService.getVosWhereUserIsMember(this.userId).subscribe(function(t){e.vos=t;var n=e.roles.get("SELF").get("User");n?e.usersManagerService.getUsersByIds(n).subscribe(function(t){e.users=t,e.loading=!1}):e.loading=!1})}},{key:"getResourcesData",value:function(e){var t=this;this.loading=!0;var n=this.roles.get(e).get("Resource");this.vos=[],this.facilities=[],this.resources=[],this.resourcesManagerService.getRichResourcesByIds(n).subscribe(function(e){t.resources=e,t.vos=t.resources.map(function(e){return e.vo}).filter(function(e,t,n){return n.indexOf(e)===t}),t.facilities=t.resources.map(function(e){return{facility:e.facility}}).filter(function(e,t,n){return n.indexOf(e)===t}),t.loading=!1})}},{key:"getMembers",value:function(){var e=this;this.loading=!0;var t=this.roles.get("SPONSORSHIP").get("Member");this.members=[],this.membersManagerService.getRichMembersByIds(t).subscribe(function(t){e.members=t,e.loading=!1})}},{key:"getGroupsAndVos",value:function(e){var t=this;this.loading=!0;var n=this.roles.get(e).get("Vo"),i=this.roles.get(e).get("Group");this.vos=[],this.groups=[],this.groupsManagerService.getGroupsByIds(i).subscribe(function(e){t.groups=e,t.vosManagerService.getVosByIds(n).subscribe(function(e){t.vos=e,t.loading=!1})})}},{key:"getFacilities",value:function(e){var t=this;this.loading=!0,this.facilities=[];var n=this.roles.get(e).get("Facility");this.facilitiesManagerService.getFacilitiesByIds(n).subscribe(function(e){t.facilities=e.map(function(e){return{facility:e}}),t.loading=!1})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(a.Ct),u.Y36(a.Fv),u.Y36(a.YF),u.Y36(a.IQ),u.Y36(a.xk),u.Y36(a.uq),u.Y36(a.ff),u.Y36(l.gz),u.Y36(o.d6))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-user-roles"]],hostVars:2,hostBindings:function(e,t){2&e&&u.ekj("router-component",t.true)},decls:5,vars:5,consts:[[1,"page-subtitle","d-flex"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"opened",4,"ngIf"],[3,"opened",4,"ngFor","ngForOf"],[3,"opened"],["mat-card-avatar","","svgIcon","perun-user-dark",1,"mr-2"],[1,"mt-auto","mb-auto"],[3,"displayedColumns","vos"],["class","mt-5",4,"ngIf"],[1,"mt-5"],[3,"users","disableRouting","displayedColumns"],["mat-card-avatar","","svgIcon","perun-group-black",1,"mr-2"],[3,"groups","displayedColumns"],["mat-card-avatar","","svgIcon","perun-vo-black",1,"mr-2"],["mat-card-avatar","","svgIcon","perun-resource-black",1,"mr-2"],[3,"resources","routingVo","displayedColumns"],["mat-card-avatar","","svgIcon","perun-facility-black",1,"mr-2"],[3,"displayedColumns","facilities"],[3,"members","displayedColumns"],["class","role-content",4,"ngFor","ngForOf"],[1,"role-content"]],template:function(e,t){1&e&&(u.TgZ(0,"h1",0),u._uU(1),u.ALo(2,"translate"),u.qZA(),u.YNc(3,E,1,0,"mat-spinner",1),u.YNc(4,ke,18,17,"mat-accordion",2)),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,3,"ROLES.TITLE")),u.xp6(2),u.Q6J("ngIf",t.outerLoading),u.xp6(1),u.Q6J("ngIf",!t.outerLoading))},directives:[c.O5,p.$g,d.pp,c.sg,d.ib,d.yz,d.yK,f.Hw,g.kc,m.Z,h.C,I.W,v.C,Z.X,A.O],pipes:[S.X$],styles:[".role-content[_ngcontent-%COMP%]{overflow:auto;overflow-y:hidden}.info-icon[_ngcontent-%COMP%]{vertical-align:middle;transform:scale(.8)}"]}),t}()},2043:function(e,t,n){"use strict";n.d(t,{d:function(){return T}});var s=n(60611),a=n(65249),o=n(4230),u=n(84140),l=n(93215),c=n(26019),p=n(68416),d=n(31572),f=n(84608),g=n(57629),m=n(59403),h=n(15980),I=n(61511),v=n(77889),Z=n(67806),A=n(48160);function S(e,t){if(1&e&&(d._UZ(0,"app-users-list",6),d.ALo(1,"translate")),2&e){var n=d.oxw();d.Q6J("tableId",n.tableId)("noUsersFoundLabel",d.lcZ(1,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.NO_ASSOCIATED_USERS"))("users",n.associatedUsers)("selection",n.selection)("disableRouting",n.disableRouting)("displayedColumns",n.displayedColumns)}}function E(e,t){1&e&&d._UZ(0,"mat-spinner",7)}var T=function(){var e=function(){function e(t,n,r,a,u){i(this,e),this.dialog=t,this.router=n,this.authResolver=r,this.userManager=a,this.entityStorageService=u,this.loading=!1,this.selection=new o.Ov(!1,[]),this.associatedUsers=[],this.tableId=s.It,this.displayedColumns=["select","id","user","name"]}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.user=this.entityStorageService.getEntity(),this.userManager.getUsersBySpecificUser(this.user.id).subscribe(function(t){e.associatedUsers=t,e.setAuth(),e.loading=!1})}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.userManager.getUsersBySpecificUser(this.user.id).subscribe(function(t){e.associatedUsers=t,e.selection.clear(),e.loading=!1})}},{key:"setAuth",value:function(){this.addAuth=this.authResolver.isAuthorized("addSpecificUserOwner_User_User_policy",[this.user]),this.removeAuth=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[this.user]),this.disableRouting=!this.authResolver.isPerunAdminOrObserver()}},{key:"onAdd",value:function(){var e=this,t=(0,u.kZ)();t.width="1250px",t.data={userId:this.user.id,theme:"user-theme",isService:!0,target:"USER"},this.dialog.open(l.l,t).afterClosed().subscribe(function(t){t&&e.refreshTable()})}},{key:"onRemove",value:function(){var e=this,t=(0,u.kZ)();t.width="650px",t.data={identities:this.selection.selected,userId:this.user.id,specificUser:this.selection.selected[0],isService:!0,theme:"user-theme",targetTitle:"USER",targetDescription:"SERVICE"},this.dialog.open(c.B,t).afterClosed().subscribe(function(t){t&&(e.authResolver.isAuthorized("getUsersBySpecificUser_User_policy",[e.user])?e.refreshTable():e.router.navigate(["/myProfile"]))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(f.uw),d.Y36(g.F0),d.Y36(p.x4),d.Y36(a.Fv),d.Y36(p.fb))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-user-settings-associated-users"]],decls:13,vars:12,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2","action-button",3,"click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],[3,"tableId","noUsersFoundLabel","users","selection","disableRouting","displayedColumns",4,"ngIf"],["class","mr-auto ml-auto",4,"ngIf"],[3,"tableId","noUsersFoundLabel","users","selection","disableRouting","displayedColumns"],[1,"mr-auto","ml-auto"]],template:function(e,t){1&e&&(d.TgZ(0,"div"),d.TgZ(1,"h1",0),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"perun-web-apps-refresh-button",1),d.NdJ("refresh",function(){return t.refreshTable()}),d.qZA(),d.TgZ(5,"button",2),d.NdJ("click",function(){return t.onAdd()}),d._uU(6),d.ALo(7,"translate"),d.qZA(),d.TgZ(8,"button",3),d.NdJ("click",function(){return t.onRemove()}),d._uU(9),d.ALo(10,"translate"),d.qZA(),d.YNc(11,S,2,8,"app-users-list",4),d.qZA(),d.YNc(12,E,1,0,"mat-spinner",5)),2&e&&(d.xp6(2),d.Oqu(d.lcZ(3,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.TITLE")),d.xp6(4),d.hij(" ",d.lcZ(7,8,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.ADD")," "),d.xp6(2),d.Q6J("disabled",0===t.selection.selected.length),d.xp6(1),d.hij(" ",d.lcZ(10,10,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.REMOVE")," "),d.xp6(2),d.Q6J("ngIf",!t.loading),d.xp6(1),d.Q6J("ngIf",t.loading))},directives:[m.t,h.lW,I.O5,v.C,Z.$g],pipes:[A.X$],styles:[""]}),e}()},52384:function(e,t,n){"use strict";n.d(t,{R:function(){return N}});var s=n(4230),a=n(65249),o=n(60611),u=n(84140),l=n(93215),c=n(26019),p=n(68416),d=n(31572),f=n(57629),g=n(84608),m=n(59403),h=n(61511),I=n(15980),v=n(67806),Z=n(77889),A=n(48160);function S(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"button",6),d.NdJ("click",function(){return d.CHM(n),d.oxw().onAdd()}),d._uU(1),d.ALo(2,"translate"),d.qZA()}2&e&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.CREATE"),"\n"))}function E(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"button",7),d.NdJ("click",function(){return d.CHM(n),d.oxw().onRemove()}),d._uU(1),d.ALo(2,"translate"),d.qZA()}if(2&e){var i=d.oxw();d.Q6J("disabled",0===i.selection.selected.length),d.xp6(1),d.hij(" ",d.lcZ(2,2,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.DELETE"),"\n")}}function T(e,t){1&e&&d._UZ(0,"mat-spinner",8)}function b(e,t){if(1&e&&(d._UZ(0,"app-users-list",9),d.ALo(1,"translate")),2&e){var n=d.oxw();d.Q6J("tableId",n.tableId)("noUsersFoundLabel",d.lcZ(1,6,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.NO_IDENTITIES"))("users",n.identities)("selection",n.selection)("routeToAdmin",n.routeToAdminSection)("displayedColumns",n.displayedColumns)}}var N=function(){var e=function(){function e(t,n,r,a,u,l){i(this,e),this.route=t,this.dialog=n,this.router=r,this.userManager=a,this.authResolver=u,this.store=l,this.loading=!1,this.selection=new s.Ov(!1,[]),this.identities=[],this.tableId=o.Iz,this.displayedColumns=["select","id","user","name"],this.routeToAdminSection=!0,this.targetTitle="SERVICE",this.targetDescription="SERVICE"}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.parent.params.subscribe(function(t){e.userId=t.userId,void 0===e.userId&&(e.targetTitle="SERVICE",e.targetDescription="SELF",e.userId=e.store.getPerunPrincipal().userId,e.routeToAdminSection=!1),e.setAuthRights(),e.refreshTable()})}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.userManager.getSpecificUsersByUser(this.userId).subscribe(function(t){e.identities=t,e.selection.clear(),e.loading=!1})}},{key:"setAuthRights",value:function(){this.addIdentity=this.authResolver.isPerunAdmin(),this.removeIdentity=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[{id:this.userId,beanName:"User"}])}},{key:"onAdd",value:function(){var e=this,t=(0,u.kZ)();t.width="1250px",t.data={userId:this.userId,theme:"user-theme",isService:!1,target:this.targetTitle},this.dialog.open(l.l,t).afterClosed().subscribe(function(t){t&&e.refreshTable()})}},{key:"onRemove",value:function(){var e=this,t=(0,u.kZ)();t.width="650px",t.data={identities:this.selection.selected,userId:this.userId,specificUser:this.selection.selected[0],theme:"user-theme",targetTitle:this.targetTitle,targetDescription:this.targetDescription},this.dialog.open(c.B,t).afterClosed().subscribe(function(t){t&&e.refreshTable()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(f.gz),d.Y36(g.uw),d.Y36(f.F0),d.Y36(a.Fv),d.Y36(p.x4),d.Y36(p.d6))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-user-settings-service-identities"]],decls:8,vars:7,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","class","mr-2 action-button","color","accent",3,"click",4,"ngIf"],["mat-flat-button","","class","mr-2","color","warn",3,"disabled","click",4,"ngIf"],["class","mr-auto ml-auto",4,"ngIf"],[3,"tableId","noUsersFoundLabel","users","selection","routeToAdmin","displayedColumns",4,"ngIf"],["mat-flat-button","","color","accent",1,"mr-2","action-button",3,"click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],[3,"tableId","noUsersFoundLabel","users","selection","routeToAdmin","displayedColumns"]],template:function(e,t){1&e&&(d.TgZ(0,"h1",0),d._uU(1),d.ALo(2,"translate"),d.qZA(),d.TgZ(3,"perun-web-apps-refresh-button",1),d.NdJ("refresh",function(){return t.refreshTable()}),d.qZA(),d.YNc(4,S,3,3,"button",2),d.YNc(5,E,3,4,"button",3),d.YNc(6,T,1,0,"mat-spinner",4),d.YNc(7,b,2,8,"app-users-list",5)),2&e&&(d.xp6(1),d.Oqu(d.lcZ(2,5,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.TITLE")),d.xp6(3),d.Q6J("ngIf",t.addIdentity),d.xp6(1),d.Q6J("ngIf",t.removeIdentity),d.xp6(1),d.Q6J("ngIf",t.loading),d.xp6(1),d.Q6J("ngIf",!t.loading))},directives:[m.t,h.O5,I.lW,v.$g,Z.C],pipes:[A.X$],styles:[""]}),e}()},65515:function(e,t,n){"use strict";n.r(t),n.d(t,{UsersModule:function(){return Oe}});var s=n(61511),a=n(57629),o=n(15879),u=n(31612),l=n(31572),c=n(21575),p=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-user-settings"]],hostVars:2,hostBindings:function(e,t){2&e&&l.ekj("router-component",t.true)},decls:1,vars:0,template:function(e,t){1&e&&l._UZ(0,"app-animated-router-outlet")},directives:[c.A],styles:[""]}),e}(),d=n(65249),f=n(67806),g=n(8557);function m(e,t){1&e&&l._UZ(0,"mat-spinner",2)}function h(e,t){if(1&e&&(l.TgZ(0,"div"),l._UZ(1,"perun-web-apps-menu-buttons-field",3),l.qZA()),2&e){var n=l.oxw();l.xp6(1),l.Q6J("items",n.navItems)("size","small")}}var I=function(){var e=function(){function e(t,n){i(this,e),this.route=t,this.userManager=n,this.navItems=[],this.loading=!1}return r(e,[{key:"ngOnInit",value:function(){var e=this;window.location.pathname.startsWith("/admin")?(this.loading=!0,this.route.parent.parent.params.subscribe(function(t){e.userManager.getUserById(t.userId).subscribe(function(t){e.isServiceUser=t.serviceUser,e.initNavItems(),e.loading=!1},function(){return e.loading=!1})})):this.initNavItems()}},{key:"initNavItems",value:function(){this.navItems=[],window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:"passwordReset",label:"MENU_ITEMS.USER.PASSWORD_RESET",style:"user-btn"},{cssIcon:"perun-settings2",url:"guiConfig",label:"MENU_ITEMS.USER.GUI_CONFIG",style:"user-btn"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(a.gz),l.Y36(d.Fv))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-user-settings-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&l.ekj("router-component",t.true)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(e,t){1&e&&(l.YNc(0,m,1,0,"mat-spinner",0),l.YNc(1,h,2,2,"div",1)),2&e&&(l.Q6J("ngIf",t.loading),l.xp6(1),l.Q6J("ngIf",!t.loading))},directives:[s.O5,f.$g,g.L],styles:[""]}),e}(),v=n(95690),Z=n(41939),A=n(84140),S=n(13857),E=n(66283),T=n(4786),b=n(71522),N=n(48160);function R(e,t){if(1&e&&(l.TgZ(0,"mat-option",5),l._uU(1),l.qZA()),2&e){var n=t.$implicit;l.Q6J("value",n),l.xp6(1),l.hij(" ",n," ")}}var U=function(){var e=function(){function e(t){i(this,e),this.guiConfigService=t,this.tablePageSizeOptions=A.f7}return r(e,[{key:"ngOnInit",value:function(){this.preferredTablePageSize=this.guiConfigService.getNumber(S.Rc)}},{key:"updatePreferredTablePageSize",value:function(){this.guiConfigService.setNumber(S.Rc,this.preferredTablePageSize)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(S.Ng))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-user-settings-app-configuration"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[1,"col-12","col-lg-6","p-0"],[1,"w-100"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(l.TgZ(0,"h1",0),l._uU(1),l.ALo(2,"translate"),l.qZA(),l.TgZ(3,"div",1),l.TgZ(4,"mat-form-field",2),l.TgZ(5,"mat-label"),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.TgZ(8,"mat-select",3),l.NdJ("valueChange",function(e){return t.preferredTablePageSize=e})("valueChange",function(){return t.updatePreferredTablePageSize()}),l.YNc(9,R,2,2,"mat-option",4),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,4,"USER_DETAIL.SETTINGS.GUI_CONFIG.TITLE")),l.xp6(5),l.Oqu(l.lcZ(7,6,"USER_DETAIL.SETTINGS.GUI_CONFIG.PREF_TABLE_PAGE_SIZE")),l.xp6(2),l.Q6J("value",t.preferredTablePageSize),l.xp6(1),l.Q6J("ngForOf",t.tablePageSizeOptions))},directives:[E.KE,E.hX,T.gD,s.sg,b.ey],pipes:[N.X$],styles:[""]}),e}(),x=n(71956),_=n(68416),O=n(48958),y=n(66297),C=n(43691),L=n(36922),w=n(22196),D=function(){return{color:"black"}},q=function(){return["/myProfile"]};function Y(e,t){if(1&e&&(l.TgZ(0,"div",1),l._UZ(1,"perun-web-apps-back-button"),l.TgZ(2,"div",2),l._UZ(3,"mat-icon",3),l.ALo(4,"translate"),l.TgZ(5,"div",4),l.TgZ(6,"div",5),l.TgZ(7,"a",6),l._uU(8),l.ALo(9,"userFullName"),l.qZA(),l.TgZ(10,"span",7),l._uU(11),l.qZA(),l.qZA(),l.TgZ(12,"span",8),l._uU(13),l.ALo(14,"translate"),l.ALo(15,"translate"),l.qZA(),l.qZA(),l.qZA(),l._UZ(16,"app-animated-router-outlet"),l.qZA()),2&e){var n=l.oxw();l.xp6(3),l.s9C("matTooltip",l.lcZ(4,8,"MENU_ITEMS.USER.ENTITY")),l.Q6J("ngStyle",l.DdM(16,D)),l.xp6(4),l.Q6J("routerLink",l.DdM(17,q)),l.xp6(1),l.hij(" ",l.lcZ(9,10,n.user)," "),l.xp6(3),l.hij(" \xa0#",n.user.id," "),l.xp6(2),l.lnq(" ",l.lcZ(14,12,"MENU_ITEMS.USER.ENTITY"),", ",l.lcZ(15,14,"MENU_ITEMS.USER.USER_TYPE"),": ",n.getUserType()," ")}}var M=function(){var e=function(){function e(t,n,s){i(this,e),this.sideMenuService=t,this.store=n,this.router=s}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.path=this.router.url,this.router.events.subscribe(function(){e.path=e.router.url}),this.principal=this.store.getPerunPrincipal(),this.user=this.principal.user,this.sideMenuService.setUserItems([])}},{key:"getUserType",value:function(){return this.user.serviceUser?"Service":"Person"}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(O.D),l.Y36(_.d6),l.Y36(a.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-user-profile"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-user-dark",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"user-link",3,"routerLink"],[1,"text-muted"],[1,"mt-1","entity-info"]],template:function(e,t){1&e&&l.YNc(0,Y,17,18,"div",0),2&e&&l.Q6J("ngIf",void 0!==t.user)},directives:[s.O5,y.W,C.Hw,L.gM,s.PC,a.yS,c.A],pipes:[N.X$,w.d],styles:[""]}),e}(),J=n(7233),k=n(52384),Q=n(75585),F=n(2898),P=n(84608),V=n(15980);function G(e,t){1&e&&l._UZ(0,"mat-spinner",11)}function B(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",12),l.NdJ("click",function(){return l.CHM(n),l.oxw(2).editUser()}),l.TgZ(1,"mat-icon"),l._uU(2,"edit"),l.qZA(),l.qZA()}}var j=function(){return{color:"black"}},H=function(e){return["/myProfile/service-identities",e]};function z(e,t){if(1&e&&(l.TgZ(0,"div",1),l._UZ(1,"perun-web-apps-back-button"),l.YNc(2,G,1,0,"mat-spinner",2),l.TgZ(3,"div",3),l._UZ(4,"mat-icon",4),l.ALo(5,"translate"),l.TgZ(6,"div",5),l.TgZ(7,"div",6),l.TgZ(8,"a",7),l._uU(9),l.ALo(10,"userFullName"),l.qZA(),l.TgZ(11,"span",8),l._uU(12),l.qZA(),l.YNc(13,B,3,0,"button",9),l.qZA(),l.TgZ(14,"div"),l._uU(15),l.ALo(16,"translate"),l.qZA(),l.TgZ(17,"span",10),l._uU(18),l.ALo(19,"translate"),l.ALo(20,"translate"),l.qZA(),l.qZA(),l.qZA(),l._UZ(21,"app-animated-router-outlet"),l.qZA()),2&e){var n=l.oxw();l.xp6(2),l.Q6J("ngIf",n.loading),l.xp6(2),l.s9C("matTooltip",l.lcZ(5,12,"MENU_ITEMS.USER.ENTITY")),l.Q6J("ngStyle",l.DdM(22,j)),l.xp6(4),l.Q6J("routerLink",l.VKq(23,H,n.user.id)),l.xp6(1),l.hij(" ",l.lcZ(10,14,n.user)," "),l.xp6(3),l.hij(" \xa0#",n.user.id," "),l.xp6(1),l.Q6J("ngIf",n.authResolver.isPerunAdmin()),l.xp6(2),l.AsE(" ",l.lcZ(16,16,"ADMIN_USER.UUID"),": ",n.user.uuid," "),l.xp6(3),l.lnq(" ",l.lcZ(19,18,"MENU_ITEMS.USER.ENTITY"),", ",l.lcZ(20,20,"MENU_ITEMS.USER.USER_TYPE"),": ",n.getUserType()," ")}}var W,X=function(){var e=function(){function e(t,n,s,r,a,o,u){i(this,e),this.sideMenuService=t,this.usersService=n,this.sideMenuItemService=s,this.route=r,this.dialog=a,this.authResolver=o,this.entityStorageService=u,this.loading=!1}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.params.subscribe(function(t){var n=t.userId;e.entityStorageService.setEntity({id:Number(n),beanName:"User"}),e.usersService.getUserById(n).subscribe(function(t){e.user=t;var n=e.sideMenuItemService.parseServiceIdentity(t);e.sideMenuService.setUserItems([n]),e.loading=!1},function(){return e.loading=!1})})}},{key:"getUserType",value:function(){return this.user.serviceUser?"Service":"Person"}},{key:"editUser",value:function(){var e=this,t=(0,A.kZ)();t.width="450px",t.data={theme:"admin-theme",user:this.user},this.dialog.open(F.x,t).afterClosed().subscribe(function(t){t&&e.usersService.getUserById(e.user.id).subscribe(function(t){e.user=t})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(O.D),l.Y36(d.Fv),l.Y36(Q.V),l.Y36(a.gz),l.Y36(P.uw),l.Y36(_.x4),l.Y36(_.fb))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-service-identity-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],["class","mr-auto ml-auto",4,"ngIf"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-service-identity",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"user-link",3,"routerLink"],[1,"text-muted"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],[1,"mr-auto","ml-auto"],["mat-icon-button","",3,"click"]],template:function(e,t){1&e&&l.YNc(0,z,22,25,"div",0),2&e&&l.Q6J("ngIf",void 0!==t.user)},directives:[s.O5,y.W,C.Hw,L.gM,s.PC,a.yS,c.A,f.$g,V.lW],pipes:[N.X$,w.d],styles:[""]}),e}(),$=function(){var e=function(){function e(){i(this,e),this.navItems=[]}return r(e,[{key:"ngOnInit",value:function(){this.initNavItems()}},{key:"initNavItems",value:function(){this.navItems=[{cssIcon:"perun-user",url:"associated-users",label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"}]}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-service-identity-overview"]],decls:1,vars:2,consts:[[3,"items","size"]],template:function(e,t){1&e&&l._UZ(0,"perun-web-apps-menu-buttons-field",0),2&e&&l.Q6J("items",t.navItems)("size","small")},directives:[g.L],styles:[""]}),e}(),K=n(2043),ee=[{path:"",component:M,children:[{path:"",component:x.Z,data:{animation:"UserOverviewPage"}},{path:"attributes",component:v.u,data:{animation:"UserAttributesPage"}},{path:"organizations",component:o.j,data:{animation:"UserOrganizationsPage",showPrincipal:!0}},{path:"groups",component:u.u,data:{animation:"UserGroupsPage",showPrincipal:!0}},{path:"roles",component:J.t,data:{animation:"UserRolesPage"}},{path:"service-identities",component:k.R,data:{animation:"UserServiceIdentities"}},{path:"settings",component:p,children:[{path:"",component:I,data:{animation:"UserSettingsOverviewPage"}},{path:"passwordReset",component:Z.Nj,data:{animation:"PasswordResetPage"}},{path:"guiConfig",component:U,data:{animation:"UserAppConfigurationPage"}}]}]},{path:"service-identities/:userId",component:X,children:[{path:"",component:$},{path:"associated-users",component:K.d}]}],te=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.Bz.forChild(ee)],a.Bz]}),e}(),ne=n(40084),ie=n(80340),se=n(16073),re=n(25122),ae=n(45001),oe=n(58623),ue=n(67033),le=n(55109),ce=n(91010),pe=n(29236),de=n(71403),fe=n(45994),ge=n(27521),me=n(15812),he=n(54810),Ie=n(27679),ve=n(73005),Ze=n(27439),Ae=n(70663),Se=n(88975),Ee=n(10033),Te=n(8055),be=n(4253),Ne=n(22727),Re=n(41050),Ue=n(7423),xe=n(22280),_e=n(28780),Oe=((W=function e(t){i(this,e),this.translate=t,t.addLangs(["en","cs"])}).\u0275fac=function(e){return new(e||W)(l.LFG(N.sK))},W.\u0275mod=l.oAB({type:W}),W.\u0275inj=l.cJS({imports:[[s.ez,te,ne.Bb,ie.c,E.lN,se.UX,se.u5,C.Ps,re.SJ,ae.To,N.aw.forChild({}),V.ot,oe.JX,ue.p0,le.Nh,ce.dp,V.ot,pe.p9,P.Is,T.LD,de.ZX,f.Cq,fe.Cv,L.AV,ge.rP,me.FA,b.XK,he.Fk,Ie.t,b.si,ve.TU,Ze.QW,Ae.T5,Se._t,Ze.QW,Ee.Hi,Te.Tx,be.Cl,Ne.r,Re.g,Z.ez,Ue.r,xe.d4,_e.m]]}),W)}}])}();