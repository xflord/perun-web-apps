<div class="{{theme}}">
  <h1 mat-dialog-title>{{title}}</h1>

  <mat-spinner *ngIf="loading" class="me-auto ms-auto"></mat-spinner>

  <div *ngIf="!loading" class="dialog-container" mat-dialog-content>
    <mat-form-field>
      <mat-label>{{'DIALOGS.CREATE_EDIT_SERVICE.NAME' | translate}}</mat-label>
      <input
        matInput
        (change)="makePath()"
        [formControl]="nameControl"
        data-cy="service-name-input"
        required />
      <mat-error>{{'DIALOGS.CREATE_EDIT_SERVICE.RESTRICTION_NAME' | translate}}</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{'DIALOGS.CREATE_EDIT_SERVICE.DESCRIPTION' | translate}}</mat-label>
      <input [(ngModel)]="description" matInput data-cy="service-description-input" />
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{'DIALOGS.CREATE_EDIT_SERVICE.DELAY' | translate}}</mat-label>
      <input matInput [formControl]="delayControl" required />
      <mat-error>{{'DIALOGS.CREATE_EDIT_SERVICE.INVALID_DELAY' | translate}}</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{'DIALOGS.CREATE_EDIT_SERVICE.RECURRENCE' | translate}}</mat-label>
      <input matInput [formControl]="recurrenceControl" required />
      <mat-error>{{'DIALOGS.CREATE_EDIT_SERVICE.INVALID_RECURRENCE' | translate}}</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{'DIALOGS.CREATE_EDIT_SERVICE.PATH' | translate}}</mat-label>
      <input matInput [formControl]="pathControl" required />
      <mat-error>{{'DIALOGS.CREATE_EDIT_SERVICE.REQUIRE_PATH' | translate}}</mat-error>
    </mat-form-field>

    <span class="d-flex"
      >{{'DIALOGS.CREATE_EDIT_SERVICE.STATUS' | translate}}
      <mat-checkbox
        class="ms-3"
        [(ngModel)]="status"
        >{{'DIALOGS.CREATE_EDIT_SERVICE.STATUS_HINT' | translate}}</mat-checkbox
      >
    </span>

    <span class="d-flex"
      >{{'DIALOGS.CREATE_EDIT_SERVICE.EXPIRED_MEMBERS' | translate}}
      <mat-checkbox
        class="ms-3"
        [(ngModel)]="propagateExpiredMembers"
        >{{'DIALOGS.CREATE_EDIT_SERVICE.EXPIRED_MEMBERS_HINT' | translate}}</mat-checkbox
      >
    </span>
  </div>
  <div *ngIf="!loading" mat-dialog-actions>
    <button (click)="onCancel()" class="ms-auto" mat-flat-button>
      {{'DIALOGS.CREATE_EDIT_SERVICE.CANCEL' | translate}}
    </button>
    <button
      [disabled]="nameControl.invalid || delayControl.invalid || recurrenceControl.invalid || pathControl.invalid"
      class="ms-2"
      color="accent"
      (click)="asEdit ? onEdit() : onCreate()"
      data-cy="service-create-edit-dialog-button"
      mat-flat-button>
      {{buttonText}}
    </button>
  </div>
</div>
